var e=require("atom-package-deps"),t=require("path"),n=require("url"),i=require("disposable-event"),s=require("assert"),r=require("electron"),o=require("atom");var l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){atom.config.get("linter-ui-default.useBusySignal")&&atom.packages.getLoadedPackage("linter-ui-default").metadata["package-deps"].push("busy-signal");const t=window.requestIdleCallback((function(){if(Ks.delete(t),!atom.inSpecMode()){const{install:t}=e;t("linter-ui-default")}}));Ks.add(t)};exports.activate=a;var c=function(){Ks.forEach((e=>window.cancelIdleCallback(e))),Ks.clear();for(const e of Ys)e.dispose();Ys.clear()};exports.deactivate=c;var u=function(){const e=new Gs.default;Ys.add(e),Xs&&e.signal.attach(Xs);return e};exports.provideUI=u;var h=function(){return Array.from(Ys).map((e=>e.intentions))};exports.provideIntentions=h;var d=function(e){Xs=e,Ys.forEach((function(e){e.signal.attach(Xs)}))};exports.consumeSignal=d;var p=function(e){Js=e,Ys.forEach((function(e){e.statusBar.attach(Js)}))};exports.consumeStatusBar=p;var f={};Object.defineProperty(f,"__esModule",{value:!0});var g=void 0;f.default=g;var m=o,v={};Object.defineProperty(v,"__esModule",{value:!0});var b=void 0;v.default=b;var k=o,w={};Object.defineProperty(w,"__esModule",{value:!0});var y=void 0;w.default=y;var x=o,_={};Object.defineProperty(_,"__esModule",{value:!0});var S=G;_.$range=S;var P=K;_.$file=P;var C=function(){const e=getSelection();e&&atom.clipboard.write(e.toString())};_.copySelection=C;var E=Y;_.getPathOfMessage=E;var T=function(){let e=atom.workspace.getCenter().getActivePaneItem();const t=null!==e&&atom.workspace.isTextEditor(e);!t&&e&&q&&e.getURI&&"atom://linter-ui-default"===e.getURI()&&(!q.isAlive||q.isAlive())?e=q:q=e;return t?e:null};_.getActiveTextEditor=T;var M=function(e){const t=new Map,n=[];for(const s of e.editors){var i;const e=null!==(i=s.textEditor.getPath())&&void 0!==i?i:"";t.has(e)?t.get(e).editors.push(s):(t.set(e,{added:[],removed:[],editors:[s]}),n.push(e))}return{editorsMap:t,filePaths:n}};_.getEditorsMap=M;var A=function(e,t,n=null){const i=[];return e.forEach((function(e){e&&e.location&&(null!==t&&K(e)!==t||n&&e.severity!==n||i.push(e))})),i};_.filterMessages=A;var O=function(e,t,n){const i=[],s="Point"===n.constructor.name?new B.Range(n,n):B.Range.fromObject(n);return e.forEach((function(e){const n=K(e),r=G(e);n&&r&&n===t&&"function"==typeof r.intersectsWith&&r.intersectsWith(s)&&i.push(e)})),i};_.filterMessagesByRangeOrPoint=O;var $=X;_.openFile=$;var R=function(e,t=!1){let n,i;if(t){if(!e.reference||!e.reference.file)return void console.warn("[Linter-UI-Default] Message does not have a valid reference. Ignoring");n=e.reference.file,i=e.reference.position}else{const t=G(e);n=K(e),t&&(i=t.start)}n&&X(n,i)};_.visitMessage=R;var D=function(e){2===e.version&&e.url&&F.shell.openExternal(e.url)};_.openExternally=D;var z=function(e,t){const n=t[0],i="asc"===t[1]?1:-1;return e.sort((function(e,t){if("severity"===n){const n=U[e.severity],s=U[t.severity];if(n!==s)return i*(n>s?1:-1)}if("linterName"===n){const n=e.severity.localeCompare(t.severity);if(0!==n)return i*n}if("file"===n){const n=Y(e),s=n.length,r=Y(t),o=r.length;if(s!==o)return i*(s>o?1:-1);if(n!==r)return i*n.localeCompare(r)}if("line"===n){const n=G(e),s=G(t);if(n&&!s)return 1;if(s&&!n)return-1;if(n&&s){if(n.start.row!==s.start.row)return i*(n.start.row>s.start.row?1:-1);if(n.start.column!==s.start.column)return i*(n.start.column>s.start.column?1:-1)}}return 0}))};_.sortMessages=z;var I=function(e){return e.sort((function(e,t){return void 0===e.priority||void 0===t.priority?0:t.priority-e.priority}))};_.sortSolutions=I;var L=function(e,t){if("apply"in t)return t.apply(),!0;const n=t.position,i=t.replaceWith;if("currentText"in t){const i=t.currentText,s=e.getTextInBufferRange(n);if(i!==s)return console.warn("[linter-ui-default] Not applying fix because text did not match the expected one","expected",i,"but got",s),!1}return e.setTextInBufferRange(n,i),!0};_.applySolution=L;var j=function(e){const t=e.getLineCount();if(e.largeFileMode||t>=J)return!0;const n=e.getBuffer();for(let e=0,i=t;e<i;e++)if(n.lineLengthForRow(e)>Q)return!0;return!1};_.isLargeFile=j;var N=(W=void 0,H=_.severityScore=W,V=_.severityNames=H,Z=_.WORKSPACE_URI=V,_.DOCK_ALLOWED_LOCATIONS=Z);_.DOCK_DEFAULT_LOCATION=N;var B=o,F=r;let q=null;const U={error:3,warning:2,info:1};var W=U;_.severityScore=W;var H={error:"Error",warning:"Warning",info:"Info"};_.severityNames=H;var V="atom://linter-ui-default";_.WORKSPACE_URI=V;var Z=["center","bottom"];_.DOCK_ALLOWED_LOCATIONS=Z;function G(e){return e.location.position}function K(e){return e.location.file}function Y(e){return atom.project.relativizePath(K(e)||"")[1]}function X(e,t){const n={searchAllPanes:!0};t&&(n.initialLine=t.row,n.initialColumn=t.column),atom.workspace.open(e,n)}N="bottom",_.DOCK_DEFAULT_LOCATION=N;const J=atom.config.get("linter-ui-default.largeFileLineCount"),Q=atom.config.get("linter-ui-default.longLineLength");y=class{constructor(){this.emitter=new x.Emitter,this.messages=[],this.filteredMessages=[],this.subscriptions=new x.CompositeDisposable,this.panelRepresents=void 0;let e=null;this.subscriptions.add(atom.config.observe("linter-ui-default.panelRepresents",(e=>{const t=void 0!==this.panelRepresents;this.panelRepresents=e,t&&this.update()})),atom.workspace.getCenter().observeActivePaneItem((()=>{e&&(e.dispose(),e=null);const t=(0,_.getActiveTextEditor)();if(t){"Entire Project"!==this.panelRepresents&&this.update();let n=-1;e=t.onDidChangeCursorPosition((({newBufferPosition:e})=>{n!==e.row&&"Current Line"===this.panelRepresents&&(n=e.row,this.update())}))}("Entire Project"!==this.panelRepresents||t)&&this.update()})),new x.Disposable((function(){e&&e.dispose()})))}getFilteredMessages(){let e=[];if("Entire Project"===this.panelRepresents)e=this.messages;else if("Current File"===this.panelRepresents){const t=(0,_.getActiveTextEditor)();if(!t)return[];e=(0,_.filterMessages)(this.messages,t.getPath())}else if("Current Line"===this.panelRepresents){const t=(0,_.getActiveTextEditor)();if(!t)return[];const n=t.getCursors()[0].getBufferRow();e=(0,_.filterMessagesByRangeOrPoint)(this.messages,t.getPath(),x.Range.fromObject([[n,0],[n,1/0]]))}return e}update(e=null){Array.isArray(e)&&(this.messages=e),this.filteredMessages=this.getFilteredMessages(),this.emitter.emit("observe-messages",this.filteredMessages)}onDidChangeMessages(e){return this.emitter.on("observe-messages",e)}dispose(){this.subscriptions.dispose()}},w.default=y;var ee=Bt(w=w.default),te={};Object.defineProperty(te,"__esModule",{value:!0});var ne=void 0;te.default=ne;const ie=(e,t)=>e===t;let se=Ae;const re={},oe={owned:null,cleanups:null,context:null,owner:null},[le,ae]=ve(!1,!0);var ce=null,ue=null;let he=null,de=null,pe=null,fe=null,ge=0;function me(e,t){t&&(ce=t);const n=ue,i=ce,s=0===e.length?oe:{owned:null,cleanups:null,context:null,owner:i,attached:!!t};let r;ce=s,ue=null;try{Me((()=>r=e((()=>De(s)))),!0)}finally{ue=n,ce=i}return r}function ve(e,t,n){const i={value:e,observers:null,observerSlots:null,pending:re,comparator:t?"function"==typeof t?t:ie:void 0};return[_e.bind(i),Se.bind(i)]}function be(e,t){Pe(Ee(e,t,!1))}function ke(e,t,n){const i=Ee(e,t,!0);return i.pending=re,i.observers=null,i.observerSlots=null,i.state=0,i.comparator=n?"function"==typeof n?n:ie:void 0,Pe(i),_e.bind(i)}function we(e){if(he)return e();const t=he=[],n=e();return he=null,Me((()=>{for(let e=0;e<t.length;e+=1){const n=t[e];if(n.pending!==re){const e=n.pending;n.pending=re,Se.call(n,e)}}}),!1),n}function ye(e){let t,n=ue;return ue=null,t=e(),ue=n,t}function xe(e){!function(e,t){if(globalThis._$HYDRATION&&globalThis._$HYDRATION.asyncSSR)return;se=Oe;const n=Ee(e,t,!1);n.user=!0,pe&&pe.push(n)}((()=>ye(e)))}function _e(){if(this.state&&this.sources){const e=de;de=null,1===this.state?Pe(this):$e(this),de=e}if(ue){const e=this.observers?this.observers.length:0;ue.sources?(ue.sources.push(this),ue.sourceSlots.push(e)):(ue.sources=[this],ue.sourceSlots=[e]),this.observers?(this.observers.push(ue),this.observerSlots.push(ue.sources.length-1)):(this.observers=[ue],this.observerSlots=[ue.sources.length-1])}return fe&&fe.running&&fe.sources.has(this)?this.tValue:this.value}function Se(e,t){if(this.comparator)if(fe&&fe.running&&fe.sources.has(this)){if(this.comparator(this.tValue,e))return e}else if(this.comparator(this.value,e))return e;return he?(this.pending===re&&he.push(this),this.pending=e,e):(fe?((fe.running||!t&&fe.sources.has(this))&&(fe.sources.add(this),this.tValue=e),fe.running||(this.value=e)):this.value=e,!this.observers||de&&!this.observers.length||Me((()=>{for(let e=0;e<this.observers.length;e+=1){const t=this.observers[e];fe&&fe.running&&fe.disposed.has(t)||(t.observers&&2!==t.state&&Re(t),t.state=1,t.pure?de.push(t):pe.push(t))}if(de.length>1e6)throw de=[],new Error("Potential Infinite Loop Detected.")}),!1),e)}function Pe(e){if(!e.fn)return;De(e);const t=ce,n=ue,i=ge;ue=ce=e,Ce(e,e.value,i),fe&&!fe.running&&fe.sources.has(e)&&(fe.running=!0,Ce(e,e.tValue,i),fe.running=!1),ue=n,ce=t}function Ce(e,t,n){let i;try{i=e.fn(t)}catch(e){Ie(e)}(!e.updatedAt||e.updatedAt<=n)&&(e.observers&&e.observers.length?Se.call(e,i,!0):fe&&fe.running&&e.pure?(fe.sources.add(e),e.tValue=i):e.value=i,e.updatedAt=n)}function Ee(e,t,n){const i={fn:e,state:1,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:ce,context:null,pure:n};return null===ce||ce!==oe&&(fe&&fe.running&&ce.pure?ce.tOwned?ce.tOwned.push(i):ce.tOwned=[i]:ce.owned?ce.owned.push(i):ce.owned=[i]),i}function Te(e){let t,n=1===e.state&&e;if(e.suspense&&ye(e.suspense.inFallback))return e.suspense.effects.push(e);const i=fe&&fe.running;for(;(e.fn||i&&e.attached)&&(e=e.owner);){if(i&&fe.disposed.has(e))return;2===e.state?t=e:1===e.state&&(n=e,t=void 0)}if(t){const s=de;if(de=null,$e(t),de=s,!n||1!==n.state)return;if(i)for(e=n;(e.fn||e.attached)&&(e=e.owner);)if(fe.disposed.has(e))return}n&&Pe(n)}function Me(e,t){if(de)return e();let n=!1;t||(de=[]),pe?n=!0:pe=[],ge++;try{e()}catch(e){Ie(e)}finally{if(de&&(Ae(de),de=null),n)return;if(fe&&fe.running){if(fe.promises.size)return fe.running=!1,fe.effects.push.apply(fe.effects,pe),pe=null,void ae(!0);const e=fe.sources;fe=null,we((()=>{e.forEach((e=>{if(e.value=e.tValue,e.owned)for(let t=0,n=e.owned.length;t<n;t++)De(e.owned[t]);e.tOwned&&(e.owned=e.tOwned),delete e.tValue,delete e.tOwned})),ae(!1)}))}pe.length?we((()=>{se(pe),pe=null})):pe=null}}function Ae(e){for(let t=0;t<e.length;t++)Te(e[t])}function Oe(e){let t,n=0;for(t=0;t<e.length;t++){const i=e[t];i.user?e[n++]=i:Te(i)}const i=e.length;for(t=0;t<n;t++)Te(e[t]);for(t=i;t<e.length;t++)Te(e[t])}function $e(e){e.state=0;for(let t=0;t<e.sources.length;t+=1){const n=e.sources[t];n.sources&&(1===n.state?Te(n):2===n.state&&$e(n))}}function Re(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=2,n.observers&&Re(n))}}function De(e){let t;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),n=e.sourceSlots.pop(),i=t.observers;if(i&&i.length){const e=i.pop(),s=t.observerSlots.pop();n<i.length&&(e.sourceSlots[s]=n,i[n]=e,t.observerSlots[n]=s)}}if(fe&&fe.running&&e.pure){if(e.tOwned){for(t=0;t<e.tOwned.length;t++)De(e.tOwned[t]);delete e.tOwned}ze(e,!0)}else if(e.owned){for(t=0;t<e.owned.length;t++)De(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function ze(e,t){if(t||(e.state=0,fe.disposed.add(e)),e.owned)for(let t=0;t<e.owned.length;t++)ze(e.owned[t])}function Ie(e){const t=null;if(!t)throw e;t.forEach((t=>t(e)))}function Le(e){if("function"==typeof e)return Le(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){let i=Le(e[n]);Array.isArray(i)?t.push.apply(t,i):t.push(i)}return t}return e}function je(e){return function(t){return ke((()=>{ce.context={[e]:t.value};const n=ke((()=>t.children));return ke((()=>Le(n())))}))}}const Ne=Symbol("state-raw"),Be=Symbol("state-node"),Fe=Symbol("state-proxy"),qe=Symbol("state-name");function Ue(e,t,n,i){let s=e[Fe];if(!s&&(Object.defineProperty(e,Fe,{value:s=new Proxy(e,i||Ge)}),n)){let t=Object.keys(e),n=Object.getOwnPropertyDescriptors(e);for(let i=0,r=t.length;i<r;i++){const r=t[i];if(n[r].get){const t=ke(n[r].get.bind(s),void 0,!0);Object.defineProperty(e,r,{get:t})}if(n[r].set){const t=n[r].set,i=e=>we((()=>t.call(s,e)));Object.defineProperty(e,r,{set:i})}}}return s}function We(e){return null!=e&&"object"==typeof e&&(!e.__proto__||e.__proto__===Object.prototype||Array.isArray(e))}function He(e,t){let n,i,s,r;if(n=null!=e&&e[Ne])return n;if(!We(e))return e;if(Array.isArray(e)){Object.isFrozen(e)&&(e=e.slice(0));for(let n=0,r=e.length;n<r;n++)s=e[n],(i=He(s,t))!==s&&(e[n]=i)}else{Object.isFrozen(e)&&(e=Object.assign({},e));let n=Object.keys(e),o=t&&Object.getOwnPropertyDescriptors(e);for(let l=0,a=n.length;l<a;l++)r=n[l],t&&o[r].get||(s=e[r],(i=He(s,t))!==s&&(e[r]=i))}return e}function Ve(e){let t=e[Be];return t||Object.defineProperty(e,Be,{value:t={}}),t}function Ze(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||t===Fe||t===Be||t===qe||(delete n.value,delete n.writable,n.get=()=>e[t]),n}const Ge={get(e,t,n){if(t===Ne)return e;if(t===Fe)return n;const i=e[t];if(t===Be||"__proto__"===t)return i;const s=We(i);if(ue&&("function"!=typeof i||e.hasOwnProperty(t))){let n,r;s&&(n=Ve(i))&&(r=n._||(n._=ve()),r[0]()),n=Ve(e),r=n[t]||(n[t]=ve()),r[0]()}return s?Ue(i):i},set:()=>!0,deleteProperty:()=>!0,getOwnPropertyDescriptor:Ze};function Ke(e,t,n){if(e[t]===n)return;const i=Array.isArray(e)||!(t in e);void 0===n?delete e[t]:e[t]=n;let s,r=Ve(e);(s=r[t])&&s[1](n),i&&(s=r._)&&s[1]()}function Ye(e,t,n=[]){let i,s=e;if(t.length>1){i=t.shift();const r=typeof i,o=Array.isArray(e);if(Array.isArray(i)){for(let s=0;s<i.length;s++)Ye(e,[i[s]].concat(t),[i[s]].concat(n));return}if(o&&"function"===r){for(let s=0;s<e.length;s++)i(e[s],s)&&Ye(e,[s].concat(t),[s].concat(n));return}if(o&&"object"===r){const{from:s=0,to:r=e.length-1,by:o=1}=i;for(let i=s;i<=r;i+=o)Ye(e,[i].concat(t),[i].concat(n));return}if(t.length>1)return void Ye(e[i],t,[i].concat(n));s=e[i],n=[i].concat(n)}let r=t[0];"function"==typeof r&&(r=r(s,n),r===s)||void 0===i&&null==r||(r=He(r),void 0===i||We(s)&&We(r)&&!Array.isArray(r)?function(e,t){const n=Object.keys(t);for(let i=0;i<n.length;i+=1){const s=n[i];Ke(e,s,t[s])}}(s,r):Ke(e,i,r))}function Xe(e,t){const n=He(e||{},!0);return[Ue(n,0,!0),function(...e){we((()=>Ye(n,e)))}]}const Je=Symbol("fallback");function Qe(e,t,n={}){let i=[],s=[],r=[],o=0,l=t.length>1?[]:null,a=ce;var c;return c=()=>{for(let e=0,t=r.length;e<t;e++)r[e]()},null===ce||(null===ce.cleanups?ce.cleanups=[c]:ce.cleanups.push(c)),()=>{let c,u,h=e()||[];return ye((()=>{let e,t,p,f,g,m,v,b,k,w=h.length;if(0===w){if(0!==o){for(c=0;c<o;c++)r[c]();r=[],i=[],s=[],o=0,l&&(l=[])}n.fallback&&(i=[Je],s[0]=me((e=>(r[0]=e,n.fallback())),a),o=1)}else if(0===o){for(u=0;u<w;u++)i[u]=h[u],s[u]=me(d,a);o=w}else{for(p=new Array(w),f=new Array(w),l&&(g=new Array(w)),m=0,v=Math.min(o,w);m<v&&i[m]===h[m];m++);for(v=o-1,b=w-1;v>=m&&b>=m&&i[v]===h[b];v--,b--)p[b]=s[v],f[b]=r[v],l&&(g[b]=l[v]);for(e=new Map,t=new Array(b+1),u=b;u>=m;u--)k=h[u],c=e.get(k),t[u]=void 0===c?-1:c,e.set(k,u);for(c=m;c<=v;c++)k=i[c],u=e.get(k),void 0!==u&&-1!==u?(p[u]=s[c],f[u]=r[c],l&&(g[u]=l[c]),u=t[u],e.set(k,u)):r[c]();for(u=m;u<w;u++)u in p?(s[u]=p[u],r[u]=f[u],l&&(l[u]=g[u],l[u](u))):s[u]=me(d,a);o=s.length=w,i=h.slice(0)}return s}));function d(e){if(r[u]=e,l){const[e,n]=ve(u,!0);return l[u]=n,t(h[u],e)}return t(h[u])}}}function et(e,t){return ye((()=>e(t)))}function tt(e){const t="fallback"in e&&{fallback:()=>e.fallback};return ke(Qe((()=>e.each),e.children,t||void 0))}(function(e){const t=Symbol("context");je(t)})(),new Set(["className","indeterminate","value","allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","truespeed"]),new Set(["innerHTML","textContent","innerText","children"]),new Set(["abort","animationstart","animationend","animationiteration","blur","change","copy","cut","error","focus","gotpointercapture","load","loadend","loadstart","lostpointercapture","mouseenter","mouseleave","paste","pointerenter","pointerleave","progress","reset","scroll","select","submit","toggle","transitionstart","transitioncancel","transitionend","transitionrun"]),new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]);function nt(e,t){return ke(e,void 0,t)}function it(e,t,n){let i=n.length,s=t.length,r=i,o=0,l=0,a=t[s-1].nextSibling,c=null;for(;o<s||l<r;)if(s===o){const t=r<i?l?n[l-1].nextSibling:n[r-l]:a;for(;l<r;)e.insertBefore(n[l++],t)}else if(r===l)for(;o<s;)c&&c.has(t[o])||e.removeChild(t[o]),o++;else if(t[o]===n[l])o++,l++;else if(t[s-1]===n[r-1])s--,r--;else if(t[o]===n[r-1]&&n[l]===t[s-1]){const i=t[--s].nextSibling;e.insertBefore(n[l++],t[o++].nextSibling),e.insertBefore(n[--r],i),t[s]=n[r]}else{if(!c){c=new Map;let e=l;for(;e<r;)c.set(n[e],e++)}const i=c.get(t[o]);if(null!=i)if(l<i&&i<r){let a,u=o,h=1;for(;++u<s&&u<r&&null!=(a=c.get(t[u]))&&a===i+h;)h++;if(h>i-l){const s=t[o];for(;l<i;)e.insertBefore(n[l++],s)}else e.replaceChild(n[l++],t[o++])}else o++;else e.removeChild(t[o++])}}const st=new Set;function rt(e,t,n){let i;return me((s=>{i=s,ct(t,e(),t.firstChild?null:void 0,n)})),()=>{i(),t.textContent=""}}function ot(e,t,n){const i=document.createElement("template");if(i.innerHTML=e,t&&i.innerHTML.split("<").length-1!==t)throw`Template html does not match input:\n${i.innerHTML}\n\n${e}`;let s=i.content.firstChild;return n&&(s=s.firstChild),s}function lt(e){for(let t=0,n=e.length;t<n;t++){const n=e[t];st.has(n)||(st.add(n),document.addEventListener(n,ut))}}function at(e,t,n){!1===n||null==n?e.removeAttribute(t):e.setAttribute(t,n)}function ct(e,t,n,i){if(void 0===n||i||(i=[]),"function"!=typeof t)return ht(e,t,i,n);be((i=>ht(e,t(),i,n)),i)}function ut(e){const t=`__${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>n});null!==n;){const i=n[t];if(i){const s=n[`${t}Data`];if(void 0!==s?i(s,e):i(e),e.cancelBubble)return}n=n.host&&n.host!==n&&n.host instanceof Node?n.host:n.parentNode}}function ht(e,t,n,i,s){for(;"function"==typeof n;)n=n();if(t===n)return n;const r=typeof t,o=void 0!==i;if(e=o&&n[0]&&n[0].parentNode||e,"string"===r||"number"===r)if("number"===r&&(t=t.toString()),o){let s=n[0];s&&3===s.nodeType?s.data=t:s=document.createTextNode(t),n=ft(e,n,i,s)}else n=""!==n&&"string"==typeof n?e.firstChild.data=t:e.textContent=t;else if(null==t||"boolean"===r)n=ft(e,n,i);else{if("function"===r)return be((()=>{let s=t();for(;"function"==typeof s;)s=s();n=ht(e,s,n,i)})),()=>n;if(Array.isArray(t)){const r=[];if(dt(r,t,s))return be((()=>n=ht(e,r,n,i,!0))),()=>n;if(0===r.length){if(n=ft(e,n,i),o)return n}else Array.isArray(n)?0===n.length?pt(e,r,i):it(e,n,r):null==n||""===n?pt(e,r):it(e,o&&n||[e.firstChild],r);n=r}else if(t instanceof Node){if(Array.isArray(n)){if(o)return n=ft(e,n,i,t);ft(e,n,null,t)}else null!=n&&""!==n&&e.firstChild?e.replaceChild(t,e.firstChild):e.appendChild(t);n=t}else console.warn("Skipped inserting",t)}return n}function dt(e,t,n){let i=!1;for(let s=0,r=t.length;s<r;s++){let r,o=t[s];if(o instanceof Node)e.push(o);else if(null==o||!0===o||!1===o);else if(Array.isArray(o))i=dt(e,o)||i;else if("string"==(r=typeof o))e.push(document.createTextNode(o));else if("function"===r)if(n){for(;"function"==typeof o;)o=o();i=dt(e,Array.isArray(o)?o:[o])||i}else e.push(o),i=!0;else e.push(document.createTextNode(o.toString()))}return i}function pt(e,t,n){for(let i=0,s=t.length;i<s;i++)e.insertBefore(t[i],n)}function ft(e,t,n,i){if(void 0===n)return e.textContent="";const s=i||document.createTextNode("");if(t.length){let i=!1;for(let r=t.length-1;r>=0;r--){const o=t[r];if(s!==o){const t=o.parentNode===e;i||r?t&&e.removeChild(o):t?e.replaceChild(s,o):e.insertBefore(s,n)}else i=!0}}else e.insertBefore(s,n);return[s]}var gt=o,mt={},vt=ot;Object.defineProperty(mt,"__esModule",{value:!0});var bt=function(e){const[t,n]=ve(e.delegate.filteredMessages);xe((()=>{e.delegate.onDidChangeMessages((e=>{n(e)}))}));const i=[{id:"severity",label:"Severity"},{id:"linterName",label:"Provider"},{id:"excerpt",label:"Description",onClick:Lt,sortable:!1},{id:"line",label:"Line",onClick:Lt}];"Entire Project"===e.delegate.panelRepresents&&i.push({id:"file",label:"File",onClick:Lt});return(()=>{const e=zt.cloneNode(!0);return at(e,"tabindex",-1),e.style.setProperty("overflowY","scroll"),e.style.setProperty("height","100%"),ct(e,et(Ct,{get rows(){return t()},columns:i,defaultSortDirection:["line","asc"],rowSorter:_.sortMessages,accessors:!0,getRowID:e=>e.key,bodyRenderer:It,style:{width:"100%"},className:"linter dark"})),e})()};mt.PanelComponent=bt;var kt,wt={};kt=wt,Object.defineProperty(kt,"__esModule",{value:!0});wt.default={};const yt=ot("<table><thead><tr></tr></thead><tbody></tbody></table>",8),xt=ot("<th></th>",2),_t=ot("<tr></tr>",2),St=ot("<td></td>",2),Pt=ot('<span class="sort-icon"></span>',2);function Ct(e){var t;const[n,i]=ve(),[s,r]=ve(e.rows);function o(){const t=n();return void 0!==t?t:void 0!==e.defaultSortDirection?e.defaultSortDirection:[null,null]}var l;Pe(Ee((()=>{r(e.rows)}),l,!0));const a=null!==(t=e.rowSorter)&&void 0!==t?t:Dt;function c(){const t=o();null===t[0]&&void 0!==e.defaultSortDirection?r(a(s(),e.defaultSortDirection)):null!==t[0]&&r(a(s(),t))}const{headerRenderer:u=Ot,bodyRenderer:h=$t,getRowID:d=Rt,accessors:p}=e;return void 0===e.columns&&(e.columns=function(e,t=0){const n=e[t],i=Object.keys(n),s=i.length,r=new Array(s);for(let e=0;e<s;e++)r[e]={id:i[e]};return r}(e.rows,e.representitiveRowNumber)),c(),(()=>{const t=yt.cloneNode(!0),n=t.firstChild,r=n.firstChild,l=n.nextSibling;return ct(r,et(tt,{get each(){return e.columns},children:e=>{const t=!1!==e.sortable;return(()=>{const n=xt.cloneNode(!0);var s;return n.__click=t?(s=e.id,e=>{i(function(e,t,n){const i=e[0],s=e[1];return n?e=[null,null]:i===t?e[1]="asc"===s?"desc":"asc":e=[t,"asc"],e}(o(),s,e.shiftKey)),c()}):void 0,n.className=t?"sortable":void 0,ct(n,(()=>u(e)),null),ct(n,(()=>t?function(e,t){let n;return n=null===e[0]||e[0]!==t?Mt:"asc"===e[1]?Tt:Et,(()=>{const e=Pt.cloneNode(!0);return ct(e,n),e})()}(o(),e.id):void 0),null),be((()=>at(n,"id",p?String(e.id):void 0))),n})()}})),ct(l,et(tt,{get each(){return s()},children:t=>{const n=function(e){return p?d(e):void 0}(t);return(()=>{const i=_t.cloneNode(!0);return at(i,"id",n),ct(i,et(tt,{get each(){return e.columns},children:e=>(()=>{const i=St.cloneNode(!0);return i.__click=void 0!==e.onClick?n=>e.onClick(n,t):void 0,ct(i,(()=>h(t,e.id))),be((()=>at(i,"id",n?`${n}.${e.id}`:void 0))),i})()})),i})()}})),be((n=>{var i;const s=`solid-simple-table ${null!==(i=e.className)&&void 0!==i?i:""}`,r=e.style;return s!==n._v$&&(t.className=n._v$=s),n._v$2=function(e,t,n){const i=e.style;if("string"==typeof t)return i.cssText=t;let s,r;if(null!=n&&"string"!=typeof n){for(r in t)s=t[r],s!==n[r]&&i.setProperty(r,s);for(r in n)null==t[r]&&i.removeProperty(r)}else for(r in t)i.setProperty(r,t[r]);return t}(t,r,n._v$2),n}),{_v$:void 0,_v$2:void 0}),t})()}wt.SimpleTable=Ct;const Et="↑",Tt="↓",Mt="⇅";function At(e){return"string"==typeof e?e:JSON.stringify(e)}function Ot(e){var t;return null!==(t=e.label)&&void 0!==t?t:e.id}function $t(e,t){return At("object"==typeof e?e[t]:e)}function Rt(e){return At(e)}function Dt(e,t){if(!e.length)return e;const n=t[0];return e="object"==typeof e[0]?e.sort(((e,t)=>{const i=e[n],s=t[n];return i==s?0:i<s?-1:1})):e.sort(),"desc"===t[1]?e.reverse():e}lt(["click"]);const zt=vt('<div id="linter-panel"></div>',2);function It(e,t){const n=(0,_.$range)(e);switch(t){case"file":return(0,_.getPathOfMessage)(e);case"line":return n?`${n.start.row+1}:${n.start.column+1}`:"";case"excerpt":return e.excerpt;case"severity":return _.severityNames[e.severity];default:return e[t]}}function Lt(e,t){"A"!==e.target.tagName&&(("darwin"===process.platform?e.metaKey:e.ctrlKey)?e.shiftKey?(0,_.openExternally)(t):(0,_.visitMessage)(t,!0):(0,_.visitMessage)(t))}function jt(e){const t=atom.workspace.paneContainerForItem(e);return t&&"object"==typeof t.state&&"number"==typeof t.state.size&&"function"==typeof t.render?t:null}ne=class{constructor(e){this.element=document.createElement("div"),this.subscriptions=new gt.CompositeDisposable,this.panelHeight=100,this.alwaysTakeMinimumSpace=!0,this.lastSetPaneHeight=void 0,this.subscriptions.add(atom.config.observe("linter-ui-default.panelHeight",(e=>{const t="number"==typeof this.panelHeight;this.panelHeight=e,t&&this.doPanelResize(!0)})),atom.config.observe("linter-ui-default.alwaysTakeMinimumSpace",(e=>{this.alwaysTakeMinimumSpace=e}))),this.doPanelResize(),rt((()=>et(mt.PanelComponent,{delegate:e})),this.element)}doPanelResize(e=!1){const t=jt(this);if(null===t)return;let n=null;const i=atom.views.getView(t);if(i&&this.alwaysTakeMinimumSpace){const e=i.querySelector(".list-inline.tab-bar.inset-panel"),t=e?e.getClientRects()[0]:null,s=this.element.querySelector("table"),r=s?s.getClientRects()[0]:null;t&&r&&(n=t.height+r.height+1)}let s=null;const r=null===n||e?this.panelHeight:Math.min(n,this.panelHeight);null===this.lastSetPaneHeight||t.state.size===this.lastSetPaneHeight||e||(s=t.state.size),this.lastSetPaneHeight=r,t.state.size=r,t.render(t.state),null!==s&&atom.config.set("linter-ui-default.panelHeight",s)}getURI(){return _.WORKSPACE_URI}getTitle(){return"Linter"}getDefaultLocation(){return _.DOCK_DEFAULT_LOCATION}getAllowedLocations(){return _.DOCK_ALLOWED_LOCATIONS}getPreferredHeight(){return atom.config.get("linter-ui-default.panelHeight")}dispose(){this.subscriptions.dispose();const e=jt(this);var t;null===e||this.alwaysTakeMinimumSpace||e.state.size===this.panelHeight||(atom.config.set("linter-ui-default.panelHeight",e.state.size),null===(t=e.paneForItem(this))||void 0===t||t.destroyItem(this,!0))}},te.default=ne;var Nt=Bt(te=te.default);function Bt(e){return e&&e.__esModule?e:{default:e}}b=class{constructor(){this.panel=null,this.element=document.createElement("div"),this.delegate=new ee.default,this.messages=[],this.deactivating=!1,this.subscriptions=new k.CompositeDisposable,this.showPanelConfig=!0,this.hidePanelWhenEmpty=!0,this.showPanelStateMessages=!1,this.activationTimer=void 0,this.subscriptions.add(this.delegate,atom.config.observe("linter-ui-default.hidePanelWhenEmpty",(e=>{this.hidePanelWhenEmpty=e,this.refresh()})),atom.workspace.onDidDestroyPane((({pane:e})=>{(null===this.panel||e.getItems().includes(this.panel))&&!this.deactivating&&(this.panel=null,atom.config.set("linter-ui-default.showPanel",!1))})),atom.workspace.onDidDestroyPaneItem((({item:e})=>{e instanceof Nt.default&&!this.deactivating&&(this.panel=null,atom.config.set("linter-ui-default.showPanel",!1))})),atom.config.observe("linter-ui-default.showPanel",(e=>{this.showPanelConfig=e,this.refresh()})),atom.workspace.getCenter().observeActivePaneItem((()=>{this.showPanelStateMessages=!!this.delegate.filteredMessages.length,this.refresh()}))),this.activationTimer=window.requestIdleCallback((()=>{let e=!0;const t=atom.workspace.getBottomDock();this.subscriptions.add(t.onDidChangeActivePaneItem((t=>{if(!this.panel||"bottom"!==this.getPanelLocation())return;if(e)return void(e=!1);t===this.panel!==this.showPanelConfig&&atom.config.set("linter-ui-default.showPanel",!this.showPanelConfig)})),t.onDidChangeVisible((e=>{if(!this.panel||"bottom"!==this.getPanelLocation())return;if(!e&&this.showPanelConfig&&this.hidePanelWhenEmpty&&!this.showPanelStateMessages)return;if(t.getActivePaneItem()!==this.panel)return;e!==this.showPanelConfig&&atom.config.set("linter-ui-default.showPanel",!this.showPanelConfig)}))),this.activate()}))}getPanelLocation(){if(!this.panel)return null;const e=atom.workspace.paneContainerForItem(this.panel);return e&&e.location||null}async activate(){this.panel||(this.panel=new Nt.default(this.delegate),await atom.workspace.open(this.panel,{activatePane:!1,activateItem:!1,searchAllPanes:!0}),this.update(),this.refresh())}update(e=null){e&&(this.messages=e),this.delegate.update(this.messages),this.showPanelStateMessages=!!this.delegate.filteredMessages.length,this.refresh()}async refresh(){const e=this.panel;if(null===e)return void(this.showPanelConfig&&await this.activate());const t=atom.workspace.paneContainerForItem(e);if(!t||"bottom"!==t.location)return;const n=t.getActivePaneItem()===e,i=this.showPanelConfig,s=!this.hidePanelWhenEmpty||this.showPanelStateMessages;if(i&&s){var r;if(!n)null===(r=t.paneForItem(e))||void 0===r||r.activateItem(e);t.show(),e.doPanelResize()}else n&&t.hide()}dispose(){this.deactivating=!0,this.panel&&this.panel.dispose(),this.subscriptions.dispose(),window.cancelIdleCallback(this.activationTimer)}},v.default=b;var Ft=Zs(v=v.default),qt={};Object.defineProperty(qt,"__esModule",{value:!0});var Ut=void 0;qt.default=Ut;var Wt,Ht=(Wt=s)&&Wt.__esModule?Wt:{default:Wt},Vt=o;Ut=class{constructor(){this.messages=[],this.subscriptions=new Vt.CompositeDisposable,this.subscriptions.add(atom.commands.add("atom-workspace",{"linter-ui-default:next":()=>this.move(!0,!0),"linter-ui-default:previous":()=>this.move(!1,!0),"linter-ui-default:next-error":()=>this.move(!0,!0,"error"),"linter-ui-default:previous-error":()=>this.move(!1,!0,"error"),"linter-ui-default:next-warning":()=>this.move(!0,!0,"warning"),"linter-ui-default:previous-warning":()=>this.move(!1,!0,"warning"),"linter-ui-default:next-info":()=>this.move(!0,!0,"info"),"linter-ui-default:previous-info":()=>this.move(!1,!0,"info"),"linter-ui-default:next-in-current-file":()=>this.move(!0,!1),"linter-ui-default:previous-in-current-file":()=>this.move(!1,!1),"linter-ui-default:next-error-in-current-file":()=>this.move(!0,!1,"error"),"linter-ui-default:previous-error-in-current-file":()=>this.move(!1,!1,"error"),"linter-ui-default:next-warning-in-current-file":()=>this.move(!0,!1,"warning"),"linter-ui-default:previous-warning-in-current-file":()=>this.move(!1,!1,"warning"),"linter-ui-default:next-info-in-current-file":()=>this.move(!0,!1,"info"),"linter-ui-default:previous-info-in-current-file":()=>this.move(!1,!1,"info"),"linter-ui-default:toggle-panel":()=>this.togglePanel(),"linter-ui-default:expand-tooltip":function(){},"linter-ui-default:collapse-tooltip":function(){}}),atom.commands.add("atom-text-editor:not([mini])",{"linter-ui-default:apply-all-solutions":()=>this.applyAllSolutions()}),atom.commands.add("#linter-panel",{"core:copy":()=>{const e=document.getSelection();e&&atom.clipboard.write(e.toString())}}))}togglePanel(){atom.config.set("linter-ui-default.showPanel",!atom.config.get("linter-ui-default.showPanel"))}applyAllSolutions(){const e=(0,_.getActiveTextEditor)();(0,Ht.default)(e,"textEditor was null on a command supposed to run on text-editors only");(0,_.sortMessages)((0,_.filterMessages)(this.messages,e.getPath()),["line","desc"]).forEach((function(t){2===t.version&&t.solutions&&t.solutions.length&&(0,_.applySolution)(e,(0,_.sortSolutions)(t.solutions)[0])}))}move(e,t,n=null){const i=(0,_.getActiveTextEditor)(),s=i&&i.getPath()||NaN,r=(0,_.sortMessages)((0,_.filterMessages)(this.messages,t?null:s,n),["file","asc"]),o=e?-1:1;if(!i){const t=e?r[0]:r[r.length-1];return void(t&&(0,_.visitMessage)(t))}const l=i.getCursorBufferPosition();e||r.reverse();let a=null,c=!1;for(let e=0,t=r.length;e<t;e++){const t=r[e],n=(0,_.$file)(t),i=(0,_.$range)(t);if(c||n!==s||(c=!0),n&&i){if(c&&n!==s){a=t;break}if(n===s&&l.compare(i.start)===o){a=t;break}}}!a&&r.length&&(a=r[0]),a&&(0,_.visitMessage)(a)}update(e){this.messages=e}dispose(){this.subscriptions.dispose()}},qt.default=Ut;var Zt=Zs(qt=qt.default),Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});var Kt=void 0;Gt.default=Kt;var Yt=o,Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});var Jt=void 0;Xt.default=Jt;var Qt=o,en={};Object.defineProperty(en,"__esModule",{value:!0});var tn=function(e){const t=document.createElement("a");return t.classList.add(`icon-${e}`),t.appendChild(document.createTextNode("")),t};en.getElement=tn;var nn=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=sn();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var r=i?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(n,s,r):n[s]=e[s]}n.default=e,t&&t.set(e,n);return n}(en);function sn(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return sn=function(){return e},e}Jt=class{constructor(){this.item=document.createElement("div"),this.itemErrors=nn.getElement("stop"),this.itemWarnings=nn.getElement("alert"),this.itemInfos=nn.getElement("info"),this.emitter=new Qt.Emitter,this.subscriptions=new Qt.CompositeDisposable,this.item.appendChild(this.itemErrors),this.item.appendChild(this.itemWarnings),this.item.appendChild(this.itemInfos),this.item.classList.add("inline-block"),this.item.classList.add("linter-status-count"),this.subscriptions.add(this.emitter,atom.tooltips.add(this.itemErrors,{title:"Linter Errors"}),atom.tooltips.add(this.itemWarnings,{title:"Linter Warnings"}),atom.tooltips.add(this.itemInfos,{title:"Linter Infos"})),this.itemErrors.onclick=()=>this.emitter.emit("click","error"),this.itemWarnings.onclick=()=>this.emitter.emit("click","warning"),this.itemInfos.onclick=()=>this.emitter.emit("click","info"),this.update(0,0,0)}setVisibility(e,t){t?this.item.classList.remove(`hide-${e}`):this.item.classList.add(`hide-${e}`)}update(e,t,n){this.itemErrors.childNodes[0].textContent=String(e),this.itemWarnings.childNodes[0].textContent=String(t),this.itemInfos.childNodes[0].textContent=String(n),e?this.itemErrors.classList.add("text-error"):this.itemErrors.classList.remove("text-error"),t?this.itemWarnings.classList.add("text-warning"):this.itemWarnings.classList.remove("text-warning"),n?this.itemInfos.classList.add("text-info"):this.itemInfos.classList.remove("text-info")}onDidClick(e){return this.emitter.on("click",e)}dispose(){this.subscriptions.dispose()}},Xt.default=Jt;var rn=function(e){return e&&e.__esModule?e:{default:e}}(Xt=Xt.default);Kt=class{constructor(){this.element=new rn.default,this.messages=[],this.subscriptions=new Yt.CompositeDisposable,this.statusBarRepresents=void 0,this.statusBarClickBehavior=void 0,this.subscriptions.add(this.element,atom.config.observe("linter-ui-default.statusBarRepresents",(e=>{const t=void 0!==this.statusBarRepresents;this.statusBarRepresents=e,t&&this.update()})),atom.config.observe("linter-ui-default.statusBarClickBehavior",(e=>{const t=void 0!==this.statusBarClickBehavior;this.statusBarClickBehavior=e,t&&this.update()})),atom.config.observe("linter-ui-default.showStatusBar",(e=>{this.element.setVisibility("config",e)})),atom.workspace.getCenter().observeActivePaneItem((e=>{const t=atom.workspace.isTextEditor(e);this.element.setVisibility("pane",t),t&&"Current File"===this.statusBarRepresents&&this.update()}))),this.element.onDidClick((e=>{const t=atom.views.getView(atom.workspace);if("Toggle Panel"===this.statusBarClickBehavior)atom.commands.dispatch(t,"linter-ui-default:toggle-panel");else if("Toggle Status Bar Scope"===this.statusBarClickBehavior)atom.config.set("linter-ui-default.statusBarRepresents","Entire Project"===this.statusBarRepresents?"Current File":"Entire Project");else{const n="Current File"===this.statusBarRepresents?"-in-current-file":"";atom.commands.dispatch(t,`linter-ui-default:next-${e}${n}`)}}))}update(e=null){e?this.messages=e:e=this.messages;const t={error:0,warning:0,info:0},n=(0,_.getActiveTextEditor)(),i=n&&n.getPath()||NaN;e.forEach((e=>{"Entire Project"!==this.statusBarRepresents&&(0,_.$file)(e)!==i||("error"===e.severity?t.error++:"warning"===e.severity?t.warning++:t.info++)})),this.element.update(t.error,t.warning,t.info)}attach(e){let t=null;this.subscriptions.add(atom.config.observe("linter-ui-default.statusBarPosition",(n=>{t&&t.destroy(),t=e[`add${n}Tile`]({item:this.element.item,priority:"Left"===n?0:1e3})}))),this.subscriptions.add(new Yt.Disposable((function(){t&&t.destroy()})))}dispose(){this.subscriptions.dispose()}},Gt.default=Kt;var on=Zs(Gt=Gt.default),ln={};Object.defineProperty(ln,"__esModule",{value:!0});var an=void 0;ln.default=an;var cn=o;an=class{constructor(){this.provider=void 0,this.executing=new Set,this.providerTitles=new Set,this.useBusySignal=!0,this.subscriptions=new cn.CompositeDisposable,this.subscriptions.add(atom.config.observe("linter-ui-default.useBusySignal",(e=>{this.useBusySignal=e})))}attach(e){this.provider=e.create(),this.update()}update(){const e=this.provider;if(!e)return;if(!this.useBusySignal)return;const t=new Map,n=new Set;for(const{filePath:e,linter:n}of this.executing){let i=t.get(e);i||t.set(e,i=[]),i.push(n.name)}for(const[i,s]of t){const t=i?` on ${atom.project.relativizePath(i)[1]}`:"";s.forEach((i=>{const s=`${i}${t}`;n.add(s),this.providerTitles.has(s)||(this.providerTitles.add(s),e.add(s))}))}this.providerTitles.forEach((t=>{n.has(t)||(e.remove(t),this.providerTitles.delete(t))})),t.clear()}getExecuting(e,t){for(const n of this.executing)if(n.linter===e&&n.filePath===t)return n;return null}didBeginLinting(e,t){this.getExecuting(e,t)||(this.executing.add({linter:e,filePath:t}),this.update())}didFinishLinting(e,t){const n=this.getExecuting(e,t);n&&(this.executing.delete(n),this.update())}dispose(){this.provider&&this.provider.clear(),this.providerTitles.clear(),this.executing.clear(),this.subscriptions.dispose()}},ln.default=an;var un=Zs(ln=ln.default),hn={};Object.defineProperty(hn,"__esModule",{value:!0});var dn=void 0;hn.default=dn;dn=class{constructor(){this.messages=[],this.grammarScopes=["*"]}getIntentions({textEditor:e,bufferPosition:t}){let n=[];const i=(0,_.filterMessages)(this.messages,e.getPath());for(const s of i){if(!(s.solutions&&s.solutions.length))continue;const i=(0,_.$range)(s);if(!(i&&i.containsPoint(t)))continue;let r=[];2===s.version&&s.solutions&&s.solutions.length&&(r=s.solutions);const o=s.linterName||"Linter";n=n.concat(r.map((t=>({priority:t.priority?t.priority+200:200,icon:"tools",title:t.title||`Fix ${o} issue`,selected(){(0,_.applySolution)(e,t)}}))))}return n}update(e){this.messages=e}},hn.default=dn;var pn=Zs(hn=hn.default),fn={};Object.defineProperty(fn,"__esModule",{value:!0});var gn=void 0;fn.default=gn;var mn=o,vn={};Object.defineProperty(vn,"__esModule",{value:!0});var bn=void 0;vn.default=bn;var kn,wn={};wn=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var yn,xn={},_n={};yn="object"==typeof l&&l&&l.Object===Object&&l;var Sn="object"==typeof self&&self&&self.Object===Object&&self,Pn=yn||Sn||Function("return this")();xn=function(){return _n.Date.now()};var Cn,En={},Tn={},Mn={};Cn=(_n=Pn).Symbol;var An={},On=Object.prototype,$n=On.hasOwnProperty,Rn=On.toString,Dn=Cn?Cn.toStringTag:void 0;An=function(e){var t=$n.call(e,Dn),n=e[Dn];try{e[Dn]=void 0;var i=!0}catch(e){}var s=Rn.call(e);return i&&(t?e[Dn]=n:delete e[Dn]),s};var zn={},In=Object.prototype.toString;zn=function(e){return In.call(e)};var Ln=Cn?Cn.toStringTag:void 0;Mn=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Ln&&Ln in Object(e)?An(e):zn(e)};var jn={};jn=function(e){return null!=e&&"object"==typeof e};Tn=function(e){return"symbol"==typeof e||jn(e)&&"[object Symbol]"==Mn(e)};var Nn=/^\s+|\s+$/g,Bn=/^[-+]0x[0-9a-f]+$/i,Fn=/^0b[01]+$/i,qn=/^0o[0-7]+$/i,Un=parseInt;En=function(e){if("number"==typeof e)return e;if(Tn(e))return NaN;if(wn(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=wn(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Nn,"");var n=Fn.test(e);return n||qn.test(e)?Un(e.slice(2),n?2:8):Bn.test(e)?NaN:+e};var Wn=Math.max,Hn=Math.min;var Vn=Es(kn=function(e,t,n){var i,s,r,o,l,a,c=0,u=!1,h=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=i,r=s;return i=s=void 0,c=t,o=e.apply(r,n)}function f(e){return c=e,l=setTimeout(m,t),u?p(e):o}function g(e){var n=e-a;return void 0===a||n>=t||n<0||h&&e-c>=r}function m(){var e=xn();if(g(e))return v(e);l=setTimeout(m,function(e){var n=t-(e-a);return h?Hn(n,r-(e-c)):n}(e))}function v(e){return l=void 0,d&&i?p(e):(i=s=void 0,o)}function b(){var e=xn(),n=g(e);if(i=arguments,s=this,a=e,n){if(void 0===l)return f(a);if(h)return clearTimeout(l),l=setTimeout(m,t),p(a)}return void 0===l&&(l=setTimeout(m,t)),o}return t=En(t)||0,wn(n)&&(u=!!n.leading,r=(h="maxWait"in n)?Wn(En(n.maxWait)||0,t):r,d="trailing"in n?!!n.trailing:d),b.cancel=function(){void 0!==l&&clearTimeout(l),c=0,i=a=s=l=void 0},b.flush=function(){return void 0===l?o:v(xn())},b}),Zn=Es(i),Gn=o,Kn={},Yn=ot;Object.defineProperty(Kn,"__esModule",{value:!0});var Xn=void 0;Kn.default=Xn;var Jn=o,Qn={};Object.defineProperty(Qn,"__esModule",{value:!0});var ei=void 0;Qn.default=ei;var ti=o;ei=class{constructor(){this.emitter=new ti.Emitter,this.expanded=!1,this.subscriptions=new ti.CompositeDisposable,this.showProviderName=void 0,this.subscriptions.add(this.emitter,atom.config.observe("linter-ui-default.showProviderName",(e=>{const t=void 0!==this.showProviderName;this.showProviderName=e,t&&this.emitter.emit("should-update")})),atom.commands.add("atom-workspace",{"linter-ui-default:expand-tooltip":e=>{var t;this.expanded||(this.expanded=!0,this.emitter.emit("should-expand"),null!=e&&null!==(t=e.originalEvent)&&void 0!==t&&t.isTrusted&&document.body.addEventListener("keyup",(function e(){document.body.removeEventListener("keyup",e),atom.commands.dispatch(atom.views.getView(atom.workspace),"linter-ui-default:collapse-tooltip")}),{passive:!0}))},"linter-ui-default:collapse-tooltip":()=>{this.expanded=!1,this.emitter.emit("should-collapse")}}))}onShouldUpdate(e){return this.emitter.on("should-update",e)}onShouldExpand(e){return this.emitter.on("should-expand",e)}onShouldCollapse(e){return this.emitter.on("should-collapse",e)}dispose(){this.emitter.dispose()}},Qn.default=ei;var ni=ys(Qn=Qn.default),ii={},si=ot,ri=lt;Object.defineProperty(ii,"__esModule",{value:!0});var oi=function(e){const[t,n]=Xe({description:"",descriptionShow:!1}),[i,s]=ve(!1);function r(o=null){const l=!t.descriptionShow,a=t.description||e.message.description;if(l||o)if("string"==typeof a||o){const e=(0,os.default)(o||a);n({description:e,descriptionShow:!0})}else if("function"==typeof a){if(n({...t,descriptionShow:!0}),i())return;s(!0),new Promise((function(e){e(a())})).then((e=>{if("string"!=typeof e)throw new Error("Expected result to be string, got: "+typeof e);r(e)})).catch((e=>{console.log("[Linter] Error getting descriptions",e),s(!1),t.descriptionShow&&r()}))}else console.error("[Linter] Invalid description detected, expected string or function but got:",typeof a);else n({...t,descriptionShow:!1})}xe((()=>{e.delegate.onShouldUpdate((()=>{n({description:"",descriptionShow:!1})})),e.delegate.onShouldExpand((()=>{t.descriptionShow||r()})),e.delegate.onShouldCollapse((()=>{t.descriptionShow&&r()}))}));const{message:o,delegate:l}=e;return(()=>{const n=ds.cloneNode(!0),i=n.firstChild,s=i.firstChild,a=s.firstChild,c=s.nextSibling;return n.__click=bs,ct(i,(()=>{const e=nt((()=>!!o.description),!0);return()=>e()&&(()=>{const e=ps.cloneNode(!0),n=e.firstChild;return e.__click=()=>r(),be((()=>n.className="icon linter-icon icon-"+(t.descriptionShow?"chevron-down":"chevron-right"))),e})()})(),s),ct(i,(()=>{const t=nt((()=>!!function(e){if(2===e.version&&e.solutions&&e.solutions.length)return!0;return!1}(o)),!0);return()=>t()&&et(ls.FixButton,{onClick:()=>function(){const t=e.message,n=(0,_.getActiveTextEditor)();null!==n&&2===t.version&&t.solutions&&t.solutions.length&&(0,_.applySolution)(n,(0,_.sortSolutions)(t.solutions)[0])}()})})(),s),ct(a,(()=>l.showProviderName?`${o.linterName}: `:"")),ct(s,(()=>o.excerpt),null),ct(c,(()=>{const e=nt((()=>!(!o.reference||!o.reference.file)),!0);return()=>e()&&(()=>{const e=fs.cloneNode(!0);return e.__click=()=>(0,_.visitMessage)(o,!0),e})()})(),null),ct(c,(()=>{const e=nt((()=>!!o.url),!0);return()=>e()&&(()=>{const e=gs.cloneNode(!0);return e.__click=()=>(0,_.openExternally)(o),e})()})(),null),ct(n,(()=>{const e=nt((()=>!!t.descriptionShow),!0);return()=>e()&&(()=>{const e=ms.cloneNode(!0);return ct(e,(()=>t.description||"Loading...")),e})()})(),null),be((()=>i.className=`linter-excerpt ${o.severity}`)),n})()};ii.default=oi;var li,ai,ci=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=vs();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var r=i?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(n,s,r):n[s]=e[s]}n.default=e,t&&t.set(e,n);return n}(n),ui={},hi={};function di(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}hi={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:di,changeDefaults:function(e){ai=e,hi.defaults=ai}};var pi;const fi=/[&<>"']/,gi=/[&<>"']/g,mi=/[<>"']|&(?!#?\w+;)/,vi=/[<>"']|&(?!#?\w+;)/g,bi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ki=e=>bi[e];const wi=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function yi(e){return e.replace(wi,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const xi=/(^|[^\[])\^/g;const _i=/[^\w:]/g,Si=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;const Pi={},Ci=/^[^:]+:\/*[^/]*$/,Ei=/^([^:]+:)[\s\S]*$/,Ti=/^([^:]+:\/*[^/]*)[\s\S]*$/;function Mi(e,t){Pi[" "+e]||(Ci.test(e)?Pi[" "+e]=e+"/":Pi[" "+e]=Ai(e,"/",!0));const n=-1===(e=Pi[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(Ei,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(Ti,"$1")+t:e+t}function Ai(e,t,n){const i=e.length;if(0===i)return"";let s=0;for(;s<i;){const r=e.charAt(i-s-1);if(r!==t||n){if(r===t||!n)break;s++}else s++}return e.substr(0,i-s)}pi={escape:function(e,t){if(t){if(fi.test(e))return e.replace(gi,ki)}else if(mi.test(e))return e.replace(vi,ki);return e},unescape:yi,edit:function(e,t){e=e.source||e,t=t||"";const n={replace:(t,i)=>(i=(i=i.source||i).replace(xi,"$1"),e=e.replace(t,i),n),getRegex:()=>new RegExp(e,t)};return n},cleanUrl:function(e,t,n){if(e){let e;try{e=decodeURIComponent(yi(n)).replace(_i,"").toLowerCase()}catch(e){return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}t&&!Si.test(n)&&(n=Mi(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n},resolveUrl:Mi,noopTest:{exec:function(){}},merge:function(e){let t,n,i=1;for(;i<arguments.length;i++)for(n in t=arguments[i],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},splitCells:function(e,t){const n=e.replace(/\|/g,((e,t,n)=>{let i=!1,s=t;for(;--s>=0&&"\\"===n[s];)i=!i;return i?"|":" |"})).split(/ \|/);let i=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n},rtrim:Ai,findClosingBracket:function(e,t){if(-1===e.indexOf(t[1]))return-1;const n=e.length;let i=0,s=0;for(;s<n;s++)if("\\"===e[s])s++;else if(e[s]===t[0])i++;else if(e[s]===t[1]&&(i--,i<0))return s;return-1},checkSanitizeDeprecation:function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},repeatString:function(e,t){if(t<1)return"";let n="";for(;t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e}};const{rtrim:Oi,splitCells:$i,escape:Ri,findClosingBracket:Di}=pi;function zi(e,t,n){const i=t.href,s=t.title?Ri(t.title):null,r=e[1].replace(/\\([\[\]])/g,"$1");return"!"!==e[0].charAt(0)?{type:"link",raw:n,href:i,title:s,text:r}:{type:"image",raw:n,href:i,title:s,text:Ri(r)}}li=class{constructor(e){this.options=e||ai}space(e){const t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:"space",raw:t[0]}:{raw:"\n"}}code(e,t){const n=this.rules.block.code.exec(e);if(n){const e=t[t.length-1];if(e&&"paragraph"===e.type)return{raw:n[0],text:n[0].trimRight()};const i=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:Oi(i,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],n=function(e,t){const n=e.match(/^(\s+)(?:```)/);if(null===n)return t;const i=n[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[n]=t;return n.length>=i.length?e.slice(i.length):e})).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim():t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=Oi(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e}}}nptable(e){const t=this.rules.block.nptable.exec(e);if(t){const e={type:"table",header:$i(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[],raw:t[0]};if(e.header.length===e.align.length){let t,n=e.align.length;for(t=0;t<n;t++)/^ *-+: *$/.test(e.align[t])?e.align[t]="right":/^ *:-+: *$/.test(e.align[t])?e.align[t]="center":/^ *:-+ *$/.test(e.align[t])?e.align[t]="left":e.align[t]=null;for(n=e.cells.length,t=0;t<n;t++)e.cells[t]=$i(e.cells[t],e.header.length);return e}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const e=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],text:e}}}list(e){const t=this.rules.block.list.exec(e);if(t){let e=t[0];const n=t[2],i=n.length>1,s={type:"list",raw:e,ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]},r=t[0].match(this.rules.block.item);let o,l,a,c,u,h,d,p,f=!1,g=r.length;a=this.rules.block.listItemStart.exec(r[0]);for(let t=0;t<g;t++){if(o=r[t],e=o,t!==g-1){if(c=this.rules.block.listItemStart.exec(r[t+1]),c[1].length>a[0].length||c[1].length>3){r.splice(t,2,r[t]+"\n"+r[t+1]),t--,g--;continue}(!this.options.pedantic||this.options.smartLists?c[2][c[2].length-1]!==n[n.length-1]:i===(1===c[2].length))&&(u=r.slice(t+1).join("\n"),s.raw=s.raw.substring(0,s.raw.length-u.length),t=g-1),a=c}l=o.length,o=o.replace(/^ *([*+-]|\d+[.)]) ?/,""),~o.indexOf("\n ")&&(l-=o.length,o=this.options.pedantic?o.replace(/^ {1,4}/gm,""):o.replace(new RegExp("^ {1,"+l+"}","gm"),"")),h=f||/\n\n(?!\s*$)/.test(o),t!==g-1&&(f="\n"===o.charAt(o.length-1),h||(h=f)),h&&(s.loose=!0),this.options.gfm&&(d=/^\[[ xX]\] /.test(o),p=void 0,d&&(p=" "!==o[1],o=o.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:e,task:d,checked:p,loose:h,text:o})}return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:this.options.sanitize?"paragraph":"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):Ri(t[0]):t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){t[3]&&(t[3]=t[3].substring(1,t[3].length-1));return{tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}}table(e){const t=this.rules.block.table.exec(e);if(t){const e={type:"table",header:$i(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[]};if(e.header.length===e.align.length){e.raw=t[0];let n,i=e.align.length;for(n=0;n<i;n++)/^ *-+: *$/.test(e.align[n])?e.align[n]="right":/^ *:-+: *$/.test(e.align[n])?e.align[n]="center":/^ *:-+ *$/.test(e.align[n])?e.align[n]="left":e.align[n]=null;for(i=e.cells.length,n=0;n<i;n++)e.cells[n]=$i(e.cells[n].replace(/^ *\| *| *\| *$/g,""),e.header.length);return e}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1]}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t)return{type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1]}}text(e,t){const n=this.rules.block.text.exec(e);if(n){const e=t[t.length-1];return e&&"text"===e.type?{raw:n[0],text:n[0]}:{type:"text",raw:n[0],text:n[0]}}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Ri(t[1])}}tag(e,t,n){const i=this.rules.inline.tag.exec(e);if(i)return!t&&/^<a /i.test(i[0])?t=!0:t&&/^<\/a>/i.test(i[0])&&(t=!1),!n&&/^<(pre|code|kbd|script)(\s|>)/i.test(i[0])?n=!0:n&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(i[0])&&(n=!1),{type:this.options.sanitize?"text":"html",raw:i[0],inLink:t,inRawBlock:n,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):Ri(i[0]):i[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=Oi(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=Di(t[2],"()");if(e>-1){const n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],i="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);e&&(n=e[1],i=e[3])}else i=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(e)?n.slice(1):n.slice(1,-1)),zi(t,{href:n?n.replace(this.rules.inline._escapes,"$1"):n,title:i?i.replace(this.rules.inline._escapes,"$1"):i},t[0])}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let e=(n[2]||n[1]).replace(/\s+/g," ");if(e=t[e.toLowerCase()],!e||!e.href){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return zi(n,e,n[0])}}strong(e,t,n=""){let i=this.rules.inline.strong.start.exec(e);if(i&&(!i[1]||i[1]&&(""===n||this.rules.inline.punctuation.exec(n)))){t=t.slice(-1*e.length);const n="**"===i[0]?this.rules.inline.strong.endAst:this.rules.inline.strong.endUnd;let s;for(n.lastIndex=0;null!=(i=n.exec(t));)if(s=this.rules.inline.strong.middle.exec(t.slice(0,i.index+3)),s)return{type:"strong",raw:e.slice(0,s[0].length),text:e.slice(2,s[0].length-2)}}}em(e,t,n=""){let i=this.rules.inline.em.start.exec(e);if(i&&(!i[1]||i[1]&&(""===n||this.rules.inline.punctuation.exec(n)))){t=t.slice(-1*e.length);const n="*"===i[0]?this.rules.inline.em.endAst:this.rules.inline.em.endUnd;let s;for(n.lastIndex=0;null!=(i=n.exec(t));)if(s=this.rules.inline.em.middle.exec(t.slice(0,i.index+2)),s)return{type:"em",raw:e.slice(0,s[0].length),text:e.slice(1,s[0].length-1)}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const n=/[^ ]/.test(e),i=/^ /.test(e)&&/ $/.test(e);return n&&i&&(e=e.substring(1,e.length-1)),e=Ri(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2]}}autolink(e,t){const n=this.rules.inline.autolink.exec(e);if(n){let e,i;return"@"===n[2]?(e=Ri(this.options.mangle?t(n[1]):n[1]),i="mailto:"+e):(e=Ri(n[1]),i=e),{type:"link",raw:n[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}url(e,t){let n;if(n=this.rules.inline.url.exec(e)){let e,i;if("@"===n[2])e=Ri(this.options.mangle?t(n[0]):n[0]),i="mailto:"+e;else{let t;do{t=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(t!==n[0]);e=Ri(n[0]),i="www."===n[1]?"http://"+e:e}return{type:"link",raw:n[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e,t,n){const i=this.rules.inline.text.exec(e);if(i){let e;return e=t?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):Ri(i[0]):i[0]:Ri(this.options.smartypants?n(i[0]):i[0]),{type:"text",raw:i[0],text:e}}}};var Ii;const{noopTest:Li,edit:ji,merge:Ni}=pi,Bi={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:Li,table:Li,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Bi.def=ji(Bi.def).replace("label",Bi._label).replace("title",Bi._title).getRegex(),Bi.bullet=/(?:[*+-]|\d{1,9}[.)])/,Bi.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,Bi.item=ji(Bi.item,"gm").replace(/bull/g,Bi.bullet).getRegex(),Bi.listItemStart=ji(/^( *)(bull)/).replace("bull",Bi.bullet).getRegex(),Bi.list=ji(Bi.list).replace(/bull/g,Bi.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Bi.def.source+")").getRegex(),Bi._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Bi._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Bi.html=ji(Bi.html,"i").replace("comment",Bi._comment).replace("tag",Bi._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Bi.paragraph=ji(Bi._paragraph).replace("hr",Bi.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",Bi._tag).getRegex(),Bi.blockquote=ji(Bi.blockquote).replace("paragraph",Bi.paragraph).getRegex(),Bi.normal=Ni({},Bi),Bi.gfm=Ni({},Bi.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),Bi.gfm.nptable=ji(Bi.gfm.nptable).replace("hr",Bi.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",Bi._tag).getRegex(),Bi.gfm.table=ji(Bi.gfm.table).replace("hr",Bi.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",Bi._tag).getRegex(),Bi.pedantic=Ni({},Bi.normal,{html:ji("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Bi._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Li,paragraph:ji(Bi.normal._paragraph).replace("hr",Bi.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Bi.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const Fi={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Li,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",strong:{start:/^(?:(\*\*(?=[*punctuation]))|\*\*)(?![\s])|__/,middle:/^\*\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*\*$|^__(?![\s])((?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?)__$/,endAst:/[^punctuation\s]\*\*(?!\*)|[punctuation]\*\*(?!\*)(?:(?=[punctuation_\s]|$))/,endUnd:/[^\s]__(?!_)(?:(?=[punctuation*\s])|$)/},em:{start:/^(?:(\*(?=[punctuation]))|\*)(?![*\s])|_/,middle:/^\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*$|^_(?![_\s])(?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?_$/,endAst:/[^punctuation\s]\*(?!\*)|[punctuation]\*(?!\*)(?:(?=[punctuation_\s]|$))/,endUnd:/[^\s]_(?!_)(?:(?=[punctuation*\s])|$)/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Li,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\s*punctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};Fi.punctuation=ji(Fi.punctuation).replace(/punctuation/g,Fi._punctuation).getRegex(),Fi._blockSkip="\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>",Fi._overlapSkip="__[^_]*?__|\\*\\*\\[^\\*\\]*?\\*\\*",Fi._comment=ji(Bi._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),Fi.em.start=ji(Fi.em.start).replace(/punctuation/g,Fi._punctuation).getRegex(),Fi.em.middle=ji(Fi.em.middle).replace(/punctuation/g,Fi._punctuation).replace(/overlapSkip/g,Fi._overlapSkip).getRegex(),Fi.em.endAst=ji(Fi.em.endAst,"g").replace(/punctuation/g,Fi._punctuation).getRegex(),Fi.em.endUnd=ji(Fi.em.endUnd,"g").replace(/punctuation/g,Fi._punctuation).getRegex(),Fi.strong.start=ji(Fi.strong.start).replace(/punctuation/g,Fi._punctuation).getRegex(),Fi.strong.middle=ji(Fi.strong.middle).replace(/punctuation/g,Fi._punctuation).replace(/overlapSkip/g,Fi._overlapSkip).getRegex(),Fi.strong.endAst=ji(Fi.strong.endAst,"g").replace(/punctuation/g,Fi._punctuation).getRegex(),Fi.strong.endUnd=ji(Fi.strong.endUnd,"g").replace(/punctuation/g,Fi._punctuation).getRegex(),Fi.blockSkip=ji(Fi._blockSkip,"g").getRegex(),Fi.overlapSkip=ji(Fi._overlapSkip,"g").getRegex(),Fi._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,Fi._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,Fi._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,Fi.autolink=ji(Fi.autolink).replace("scheme",Fi._scheme).replace("email",Fi._email).getRegex(),Fi._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,Fi.tag=ji(Fi.tag).replace("comment",Fi._comment).replace("attribute",Fi._attribute).getRegex(),Fi._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Fi._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,Fi._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,Fi.link=ji(Fi.link).replace("label",Fi._label).replace("href",Fi._href).replace("title",Fi._title).getRegex(),Fi.reflink=ji(Fi.reflink).replace("label",Fi._label).getRegex(),Fi.reflinkSearch=ji(Fi.reflinkSearch,"g").replace("reflink",Fi.reflink).replace("nolink",Fi.nolink).getRegex(),Fi.normal=Ni({},Fi),Fi.pedantic=Ni({},Fi.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:ji(/^!?\[(label)\]\((.*?)\)/).replace("label",Fi._label).getRegex(),reflink:ji(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Fi._label).getRegex()}),Fi.gfm=Ni({},Fi.normal,{escape:ji(Fi.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),Fi.gfm.url=ji(Fi.gfm.url,"i").replace("email",Fi.gfm._extended_email).getRegex(),Fi.breaks=Ni({},Fi.gfm,{br:ji(Fi.br).replace("{2,}","*").getRegex(),text:ji(Fi.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),Ii={block:Bi,inline:Fi};const{block:qi,inline:Ui}=Ii,{repeatString:Wi}=pi;function Hi(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function Vi(e){let t,n,i="";const s=e.length;for(t=0;t<s;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),i+="&#"+n+";";return i}ui=class e{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||ai,this.options.tokenizer=this.options.tokenizer||new li,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;const t={block:qi.normal,inline:Ui.normal};this.options.pedantic?(t.block=qi.pedantic,t.inline=Ui.pedantic):this.options.gfm&&(t.block=qi.gfm,this.options.breaks?t.inline=Ui.breaks:t.inline=Ui.gfm),this.tokenizer.rules=t}static get rules(){return{block:qi,inline:Ui}}static lex(t,n){return new e(n).lex(t)}static lexInline(t,n){return new e(n).inlineTokens(t)}lex(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens,!0),this.inline(this.tokens),this.tokens}blockTokens(e,t=[],n=!0){let i,s,r,o;for(this.options.pedantic&&(e=e.replace(/^ +$/gm,""));e;)if(i=this.tokenizer.space(e))e=e.substring(i.raw.length),i.type&&t.push(i);else if(i=this.tokenizer.code(e,t))e=e.substring(i.raw.length),i.type?t.push(i):(o=t[t.length-1],o.raw+="\n"+i.raw,o.text+="\n"+i.text);else if(i=this.tokenizer.fences(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.heading(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.nptable(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.hr(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.blockquote(e))e=e.substring(i.raw.length),i.tokens=this.blockTokens(i.text,[],n),t.push(i);else if(i=this.tokenizer.list(e)){for(e=e.substring(i.raw.length),r=i.items.length,s=0;s<r;s++)i.items[s].tokens=this.blockTokens(i.items[s].text,[],!1);t.push(i)}else if(i=this.tokenizer.html(e))e=e.substring(i.raw.length),t.push(i);else if(n&&(i=this.tokenizer.def(e)))e=e.substring(i.raw.length),this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});else if(i=this.tokenizer.table(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.lheading(e))e=e.substring(i.raw.length),t.push(i);else if(n&&(i=this.tokenizer.paragraph(e)))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.text(e,t))e=e.substring(i.raw.length),i.type?t.push(i):(o=t[t.length-1],o.raw+="\n"+i.raw,o.text+="\n"+i.text);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}return t}inline(e){let t,n,i,s,r,o;const l=e.length;for(t=0;t<l;t++)switch(o=e[t],o.type){case"paragraph":case"text":case"heading":o.tokens=[],this.inlineTokens(o.text,o.tokens);break;case"table":for(o.tokens={header:[],cells:[]},s=o.header.length,n=0;n<s;n++)o.tokens.header[n]=[],this.inlineTokens(o.header[n],o.tokens.header[n]);for(s=o.cells.length,n=0;n<s;n++)for(r=o.cells[n],o.tokens.cells[n]=[],i=0;i<r.length;i++)o.tokens.cells[n][i]=[],this.inlineTokens(r[i],o.tokens.cells[n][i]);break;case"blockquote":this.inline(o.tokens);break;case"list":for(s=o.items.length,n=0;n<s;n++)this.inline(o.items[n].tokens)}return e}inlineTokens(e,t=[],n=!1,i=!1){let s,r,o,l,a=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(r=this.tokenizer.rules.inline.reflinkSearch.exec(a));)e.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,r.index)+"["+Wi("a",r[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(r=this.tokenizer.rules.inline.blockSkip.exec(a));)a=a.slice(0,r.index)+"["+Wi("a",r[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;e;)if(o||(l=""),o=!1,s=this.tokenizer.escape(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.tag(e,n,i))e=e.substring(s.raw.length),n=s.inLink,i=s.inRawBlock,t.push(s);else if(s=this.tokenizer.link(e))e=e.substring(s.raw.length),"link"===s.type&&(s.tokens=this.inlineTokens(s.text,[],!0,i)),t.push(s);else if(s=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(s.raw.length),"link"===s.type&&(s.tokens=this.inlineTokens(s.text,[],!0,i)),t.push(s);else if(s=this.tokenizer.strong(e,a,l))e=e.substring(s.raw.length),s.tokens=this.inlineTokens(s.text,[],n,i),t.push(s);else if(s=this.tokenizer.em(e,a,l))e=e.substring(s.raw.length),s.tokens=this.inlineTokens(s.text,[],n,i),t.push(s);else if(s=this.tokenizer.codespan(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.br(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.del(e))e=e.substring(s.raw.length),s.tokens=this.inlineTokens(s.text,[],n,i),t.push(s);else if(s=this.tokenizer.autolink(e,Vi))e=e.substring(s.raw.length),t.push(s);else if(n||!(s=this.tokenizer.url(e,Vi))){if(s=this.tokenizer.inlineText(e,i,Hi))e=e.substring(s.raw.length),l=s.raw.slice(-1),o=!0,t.push(s);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(s.raw.length),t.push(s);return t}};var Zi,Gi={};const{cleanUrl:Ki,escape:Yi}=pi;Zi=class{constructor(e){this.options=e||ai}code(e,t,n){const i=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,i);null!=t&&t!==e&&(n=!0,e=t)}return e=e.replace(/\n$/,"")+"\n",i?'<pre><code class="'+this.options.langPrefix+Yi(i,!0)+'">'+(n?e:Yi(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:Yi(e,!0))+"</code></pre>\n"}blockquote(e){return"<blockquote>\n"+e+"</blockquote>\n"}html(e){return e}heading(e,t,n,i){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+i.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,n){const i=t?"ol":"ul";return"<"+i+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+i+">\n"}listitem(e){return"<li>"+e+"</li>\n"}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+"</p>\n"}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return"<tr>\n"+e+"</tr>\n"}tablecell(e,t){const n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,n){if(null===(e=Ki(this.options.sanitize,this.options.baseUrl,e)))return n;let i='<a href="'+Yi(e)+'"';return t&&(i+=' title="'+t+'"'),i+=">"+n+"</a>",i}image(e,t,n){if(null===(e=Ki(this.options.sanitize,this.options.baseUrl,e)))return n;let i='<img src="'+e+'" alt="'+n+'"';return t&&(i+=' title="'+t+'"'),i+=this.options.xhtml?"/>":">",i}text(e){return e}};var Xi;Xi=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}};var Ji;Ji=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let n=e,i=0;if(this.seen.hasOwnProperty(n)){i=this.seen[e];do{i++,n=e+"-"+i}while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=i,this.seen[n]=0),n}slug(e,t={}){const n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)}};const{unescape:Qi}=pi;Gi=class e{constructor(e){this.options=e||ai,this.options.renderer=this.options.renderer||new Zi,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Xi,this.slugger=new Ji}static parse(t,n){return new e(n).parse(t)}static parseInline(t,n){return new e(n).parseInline(t)}parse(e,t=!0){let n,i,s,r,o,l,a,c,u,h,d,p,f,g,m,v,b,k,w="";const y=e.length;for(n=0;n<y;n++)switch(h=e[n],h.type){case"space":continue;case"hr":w+=this.renderer.hr();continue;case"heading":w+=this.renderer.heading(this.parseInline(h.tokens),h.depth,Qi(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue;case"code":w+=this.renderer.code(h.text,h.lang,h.escaped);continue;case"table":for(c="",a="",r=h.header.length,i=0;i<r;i++)a+=this.renderer.tablecell(this.parseInline(h.tokens.header[i]),{header:!0,align:h.align[i]});for(c+=this.renderer.tablerow(a),u="",r=h.cells.length,i=0;i<r;i++){for(l=h.tokens.cells[i],a="",o=l.length,s=0;s<o;s++)a+=this.renderer.tablecell(this.parseInline(l[s]),{header:!1,align:h.align[s]});u+=this.renderer.tablerow(a)}w+=this.renderer.table(c,u);continue;case"blockquote":u=this.parse(h.tokens),w+=this.renderer.blockquote(u);continue;case"list":for(d=h.ordered,p=h.start,f=h.loose,r=h.items.length,u="",i=0;i<r;i++)m=h.items[i],v=m.checked,b=m.task,g="",m.task&&(k=this.renderer.checkbox(v),f?m.tokens.length>0&&"text"===m.tokens[0].type?(m.tokens[0].text=k+" "+m.tokens[0].text,m.tokens[0].tokens&&m.tokens[0].tokens.length>0&&"text"===m.tokens[0].tokens[0].type&&(m.tokens[0].tokens[0].text=k+" "+m.tokens[0].tokens[0].text)):m.tokens.unshift({type:"text",text:k}):g+=k),g+=this.parse(m.tokens,f),u+=this.renderer.listitem(g,b,v);w+=this.renderer.list(u,d,p);continue;case"html":w+=this.renderer.html(h.text);continue;case"paragraph":w+=this.renderer.paragraph(this.parseInline(h.tokens));continue;case"text":for(u=h.tokens?this.parseInline(h.tokens):h.text;n+1<y&&"text"===e[n+1].type;)h=e[++n],u+="\n"+(h.tokens?this.parseInline(h.tokens):h.text);w+=t?this.renderer.paragraph(u):u;continue;default:{const e='Token with "'+h.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return w}parseInline(e,t){t=t||this.renderer;let n,i,s="";const r=e.length;for(n=0;n<r;n++)switch(i=e[n],i.type){case"escape":s+=t.text(i.text);break;case"html":s+=t.html(i.text);break;case"link":s+=t.link(i.href,i.title,this.parseInline(i.tokens,t));break;case"image":s+=t.image(i.href,i.title,i.text);break;case"strong":s+=t.strong(this.parseInline(i.tokens,t));break;case"em":s+=t.em(this.parseInline(i.tokens,t));break;case"codespan":s+=t.codespan(i.text);break;case"br":s+=t.br();break;case"del":s+=t.del(this.parseInline(i.tokens,t));break;case"text":s+=t.text(i.text);break;default:{const e='Token with "'+i.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return s}};const{merge:es,checkSanitizeDeprecation:ts,escape:ns}=pi,{getDefaults:is,changeDefaults:ss}=hi;function rs(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(n=t,t=null),t=es({},rs.defaults,t||{}),ts(t),n){const i=t.highlight;let s;try{s=ui.lex(e,t)}catch(e){return n(e)}const r=function(e){let r;if(!e)try{r=Gi.parse(s,t)}catch(t){e=t}return t.highlight=i,e?n(e):n(null,r)};if(!i||i.length<3)return r();if(delete t.highlight,!s.length)return r();let o=0;return rs.walkTokens(s,(function(e){"code"===e.type&&(o++,setTimeout((()=>{i(e.text,e.lang,(function(t,n){if(t)return r(t);null!=n&&n!==e.text&&(e.text=n,e.escaped=!0),o--,0===o&&r()}))}),0))})),void(0===o&&r())}try{const n=ui.lex(e,t);return t.walkTokens&&rs.walkTokens(n,t.walkTokens),Gi.parse(n,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+ns(e.message+"",!0)+"</pre>";throw e}}rs.options=rs.setOptions=function(e){return es(rs.defaults,e),ss(rs.defaults),rs},rs.getDefaults=is,rs.defaults=ai,rs.use=function(e){const t=es({},e);if(e.renderer){const n=rs.defaults.renderer||new Zi;for(const t in e.renderer){const i=n[t];n[t]=(...s)=>{let r=e.renderer[t].apply(n,s);return!1===r&&(r=i.apply(n,s)),r}}t.renderer=n}if(e.tokenizer){const n=rs.defaults.tokenizer||new li;for(const t in e.tokenizer){const i=n[t];n[t]=(...s)=>{let r=e.tokenizer[t].apply(n,s);return!1===r&&(r=i.apply(n,s)),r}}t.tokenizer=n}if(e.walkTokens){const n=rs.defaults.walkTokens;t.walkTokens=t=>{e.walkTokens(t),n&&n(t)}}rs.setOptions(t)},rs.walkTokens=function(e,t){for(const n of e)switch(t(n),n.type){case"table":for(const e of n.tokens.header)rs.walkTokens(e,t);for(const e of n.tokens.cells)for(const n of e)rs.walkTokens(n,t);break;case"list":rs.walkTokens(n.items,t);break;default:n.tokens&&rs.walkTokens(n.tokens,t)}},rs.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");t=es({},rs.defaults,t||{}),ts(t);try{const n=ui.lexInline(e,t);return t.walkTokens&&rs.walkTokens(n,t.walkTokens),Gi.parseInline(n,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+ns(e.message+"",!0)+"</pre>";throw e}},rs.Parser=Gi,rs.parser=Gi.parse,rs.Renderer=Zi,rs.TextRenderer=Xi,rs.Lexer=ui,rs.lexer=ui.lex,rs.Tokenizer=li,rs.Slugger=Ji,rs.parse=rs;var os=function(e){return e&&e.__esModule?e:{default:e}}(rs),ls={},as=ot,cs=lt;Object.defineProperty(ls,"__esModule",{value:!0});var us=function(e){return(()=>{const t=hs.cloneNode(!0);return t.__click=e.onClick,t})()};ls.FixButton=us;const hs=as('<button class="fix-btn">Fix</button>',2);cs(["click"]);const ds=si('<div class="linter-message"><div><div class="linter-text"><div class="provider-name"></div></div><div class="linter-buttons-right"></div></div></div>',10),ps=si('<a href="#"><span></span></a>',4),fs=si('<a href="#"><span class="icon linter-icon icon-alignment-aligned-to"></span></a>',4),gs=si('<a href="#"><span class="icon linter-icon icon-link"></span></a>',4),ms=si('<div class="linter-line"></div>',2);function vs(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return vs=function(){return e},e}function bs(e){if(!(e.target instanceof HTMLElement))return;const t=function(e){for(;e&&!e.classList.contains("linter-line");){if(e instanceof HTMLAnchorElement)return e.href;e=e.parentElement}return null}(e.target);if(!t)return;const{protocol:n,hostname:i,query:s}=ci.parse(t,!0);if("atom:"===n&&"linter"===i&&s&&s.file){const{file:e,row:t,column:n}=s;(0,_.openFile)(Array.isArray(e)?e[0]:e,{row:t?parseInt(Array.isArray(t)?t[0]:t,10):0,column:n?parseInt(Array.isArray(n)?n[0]:n,10):0})}}ri(["click"]);var ks=ys(ii=ii.default);const ws=Yn('<div class="linter-messages"></div>',2);function ys(e){return e&&e.__esModule?e:{default:e}}Xn=class{constructor(e,t,n){this.marker=void 0,this.element=document.createElement("div"),this.emitter=new Jn.Emitter,this.messages=void 0,this.subscriptions=new Jn.CompositeDisposable,this.messages=e,this.marker=n.markBufferRange([t,t]),this.marker.onDidDestroy((()=>this.emitter.emit("did-destroy")));const i=new ni.default;this.element.id="linter-tooltip",n.decorateMarker(this.marker,{type:"overlay",item:this.element}),this.subscriptions.add(this.emitter,i);const s=[];e.forEach((e=>{2===e.version&&s.push(et(ks.default,{get key(){return e.key},delegate:i,message:e}))})),rt((()=>(()=>{const e=ws.cloneNode(!0);return ct(e,s),e})()),this.element),setTimeout((()=>{const e=this.element.getBoundingClientRect().height,i=n.getLineHeightInPixels();if(e<(t.row-n.getFirstVisibleScreenRow())*i){const t=this.element.parentElement;t&&(t.style.transform=`translateY(-${2+i+e}px)`)}this.element.style.visibility="visible"}),50)}isValid(e,t){if(1!==this.messages.length||!t.has(this.messages[0].key))return!1;const n=(0,_.$range)(this.messages[0]);return Boolean(n&&n.containsPoint(e))}onDidDestroy(e){return this.emitter.on("did-destroy",e)}dispose(){this.emitter.emit("did-destroy"),this.subscriptions.dispose()}},Kn.default=Xn;var xs=Es(Kn=Kn.default),_s={};Object.defineProperty(_s,"__esModule",{value:!0});var Ss=function(e,t,n){const i=n.getComponent().pixelPositionForMouseEvent(e),s=n.getComponent().screenPositionForPixelPosition(i);if(Number.isNaN(s.row)||Number.isNaN(s.column))return null;const r=n.pixelPositionForScreenPosition(s),o=i.top-r.top,l=i.left-r.left;if((0===o||o>0&&o<20||o<0&&o>-20)&&(0===l||l>0&&l<20||l<0&&l>-20))return t.bufferPositionForScreenPosition(s);return null};_s.getBufferPositionFromMouseEvent=Ss;var Ps=function({event:e,editor:t,editorElement:n,tooltipElement:i,screenPosition:s}){const r=n.getComponent().pixelPositionForMouseEvent(e),o=n.pixelPositionForScreenPosition(s),l=r.top-o.top,a=r.left-o.left,c=t.getLineHeightInPixels(),u=i.offsetHeight+c,h=i.offsetWidth;if(l>0){if(l>u+1.5*c)return!1}else if(l<0&&l<-1.5*c)return!1;if(a>0){if(a>h+30)return!1}else if(a<0&&a<-30)return!1;return!0};_s.mouseEventNearPosition=Ps;var Cs=function(e,t){let n=e;do{if(n.matches(t))return!0;n=n.parentElement}while(n&&"HTML"!==n.nodeName);return!1};_s.hasParent=Cs;function Es(e){return e&&e.__esModule?e:{default:e}}bn=class{constructor(e){this.textEditor=void 0,this.gutter=null,this.tooltip=null,this.emitter=new Gn.Emitter,this.markers=new Map,this.messages=new Map,this.showTooltip=!0,this.subscriptions=new Gn.CompositeDisposable,this.cursorPosition=null,this.gutterPosition=void 0,this.tooltipFollows="Both",this.showDecorations=void 0,this.showProviderName=!0,this.ignoreTooltipInvocation=!1,this.currentLineMarker=null,this.lastRange=void 0,this.lastIsEmpty=void 0,this.lastCursorPositions=new WeakMap,this.textEditor=e;let t=null;this.subscriptions.add(this.emitter,e.onDidDestroy((()=>{this.dispose()})),new Gn.Disposable((function(){var e;null===(e=t)||void 0===e||e.dispose()})),atom.config.observe("linter-ui-default.showProviderName",(e=>{this.showProviderName=e})),atom.config.observe("linter-ui-default.showDecorations",(e=>{const t=void 0!==this.showDecorations;this.showDecorations=e,t&&this.updateGutter()})),atom.config.observe("linter-ui-default.gutterPosition",(e=>{const t=void 0!==this.gutterPosition;this.gutterPosition=e,t&&this.updateGutter()})),atom.config.observe("linter-ui-default.showTooltip",(e=>{this.showTooltip=e,!this.showTooltip&&this.tooltip&&this.removeTooltip()})),atom.config.observe("linter-ui-default.tooltipFollows",(e=>{this.tooltipFollows=e,t&&t.dispose(),t=new Gn.CompositeDisposable,"Mouse"!==e&&"Both"!==e||t.add(this.listenForMouseMovement()),"Keyboard"!==e&&"Both"!==e||t.add(this.listenForKeyboardMovement()),this.removeTooltip()})),e.onDidChangeCursorPosition((({cursor:e,newBufferPosition:t})=>{const n=this.lastCursorPositions.get(e);n&&n.isEqual(t)||(this.lastCursorPositions.set(e,t),this.ignoreTooltipInvocation=!1),"Mouse"===this.tooltipFollows&&this.removeTooltip()})),e.getBuffer().onDidChangeText((()=>{e.getCursors().forEach((e=>{this.lastCursorPositions.set(e,e.getBufferPosition())})),"Mouse"!==this.tooltipFollows&&(this.ignoreTooltipInvocation=!0,this.removeTooltip())}))),this.updateGutter(),this.listenForCurrentLine()}listenForCurrentLine(){this.subscriptions.add(this.textEditor.observeCursors((e=>{const t=({start:e,end:t})=>{const n=this.gutter;if(!n||this.subscriptions.disposed)return;const i=Gn.Range.fromObject([e,t]),s=Gn.Range.fromObject([[e.row,0],[t.row,1/0]]),r=i.isEmpty();if(e.row!==t.row&&0===i.end.column&&s.end.row--,this.lastRange&&this.lastRange.isEqual(s)&&r===this.lastIsEmpty)return;this.currentLineMarker&&(this.currentLineMarker.destroy(),this.currentLineMarker=null),this.lastRange=s,this.lastIsEmpty=r,this.currentLineMarker=this.textEditor.markScreenRange(s,{invalidate:"never"});const o=document.createElement("span");o.className="line-number cursor-line linter-cursor-line "+(r?"cursor-line-no-selection":""),n.decorateMarker(this.currentLineMarker,{item:o,class:"linter-row"})},n=e.getMarker(),i=new Gn.CompositeDisposable;i.add(n.onDidChange((({newHeadScreenPosition:e,newTailScreenPosition:n})=>{t({start:e,end:n})}))),i.add(e.onDidDestroy((()=>{this.subscriptions.remove(i),i.dispose()}))),i.add(new Gn.Disposable((()=>{this.currentLineMarker&&(this.currentLineMarker.destroy(),this.currentLineMarker=null)}))),this.subscriptions.add(i),t(n.getScreenRange())})))}listenForMouseMovement(){const e=atom.views.getView(this.textEditor);return(0,Zn.default)(e,"mousemove",(0,Vn.default)((t=>{if(!e.getComponent()||this.subscriptions.disposed||!(0,_s.hasParent)(t.target,"div.scroll-view"))return;const n=this.tooltip;n&&(0,_s.mouseEventNearPosition)({event:t,editor:this.textEditor,editorElement:e,tooltipElement:n.element,screenPosition:n.marker.getStartScreenPosition()})||(this.cursorPosition=(0,_s.getBufferPositionFromMouseEvent)(t,this.textEditor,e),this.ignoreTooltipInvocation=!1,this.cursorPosition?this.updateTooltip(this.cursorPosition):this.removeTooltip())}),100),{passive:!0})}listenForKeyboardMovement(){return this.textEditor.onDidChangeCursorPosition((0,Vn.default)((({newBufferPosition:e})=>{this.cursorPosition=e,this.updateTooltip(e)}),16))}updateGutter(){if(this.removeGutter(),!this.showDecorations)return void(this.gutter=null);const e="Left"===this.gutterPosition?-100:100;this.gutter=this.textEditor.addGutter({name:"linter-ui-default",priority:e}),this.markers.forEach(((e,t)=>{const n=this.messages.get(t);if(n)for(const t of e)this.decorateMarker(n,t,"gutter")}))}removeGutter(){if(this.gutter)try{this.gutter.destroy()}catch(e){}}updateTooltip(e){if(!e||this.tooltip&&this.tooltip.isValid(e,this.messages))return;if(this.removeTooltip(),!this.showTooltip)return;if(this.ignoreTooltipInvocation)return;const t=(0,_.filterMessagesByRangeOrPoint)(this.messages,this.textEditor.getPath(),e);if(!t.length)return;this.tooltip=new xs.default(t,e,this.textEditor);const n=this.tooltip.marker;t.forEach((e=>{this.saveMarker(e.key,n)})),this.tooltip.onDidDestroy((()=>{this.tooltip=null}))}removeTooltip(){this.tooltip&&this.tooltip.marker.destroy()}apply(e,t){const n=this.textEditor.getBuffer();for(let e=0,n=t.length;e<n;e++){const n=t[e];this.destroyMarker(n.key)}for(let t=0,i=e.length;t<i;t++){const i=e[t],s=(0,_.$range)(i);if(!s)continue;const r=n.markRange(s,{invalidate:"never"});this.decorateMarker(i,r),r.onDidChange((({oldHeadPosition:e,newHeadPosition:t,isValid:n})=>{!n||0===t.row&&0!==e.row||2===i.version&&(i.location.position=r.previousEventState.range)}))}this.updateTooltip(this.cursorPosition)}decorateMarker(e,t,n="both"){this.saveMarker(e.key,t),this.messages.set(e.key,e),"both"!==n&&"editor"!==n||this.textEditor.decorateMarker(t,{type:"text",class:`linter-highlight linter-${e.severity}`});const i=this.gutter;if(i&&("both"===n||"gutter"===n)){const n=document.createElement("span");n.className=`linter-gutter linter-gutter-${e.severity} icon icon-${e.icon||"primitive-dot"}`,i.decorateMarker(t,{class:"linter-row",item:n})}}saveMarker(e,t){const n=this.markers.get(e)||[];n.push(t),this.markers.set(e,n)}destroyMarker(e){const t=this.markers.get(e);t&&t.forEach((e=>{e&&e.destroy()})),this.markers.delete(e),this.messages.delete(e)}onDidDestroy(e){return this.emitter.on("did-destroy",e)}dispose(){this.emitter.emit("did-destroy"),this.subscriptions.dispose(),this.removeGutter(),this.removeTooltip()}},vn.default=bn;var Ts=function(e){return e&&e.__esModule?e:{default:e}}(vn=vn.default);gn=class{constructor(){this.editors=new Set,this.messages=[],this.firstRender=!0,this.subscriptions=new mn.CompositeDisposable,this.subscriptions.add(atom.workspace.observeTextEditors((e=>{if((0,_.isLargeFile)(e)){const t=atom.notifications.addWarning("Linter: Large/Minified file detected",{detail:"Adding inline linter markers are skipped for this file for performance reasons (linter pane is still active)",dismissable:!0,buttons:[{text:"Force enable",onDidClick:()=>{this.getEditor(e),t.dismiss()}},{text:"Change threshold",onDidClick:async()=>{var e;await atom.workspace.open("atom://config/packages/linter-ui-default"),null===(e=document.querySelectorAll(".control-group")[16])||void 0===e||e.scrollIntoView(),t.dismiss()}}]});setTimeout((()=>{t.dismiss()}),5e3)}else this.getEditor(e)})),atom.workspace.getCenter().observeActivePaneItem((e=>{this.editors.forEach((t=>{t.textEditor!==e&&t.removeTooltip()}))})))}isFirstRender(){return this.firstRender}update({messages:e,added:t,removed:n}){this.messages=e,this.firstRender=!1;const{editorsMap:i,filePaths:s}=(0,_.getEditorsMap)(this);t.forEach((function(e){if(!e||!e.location)return;const t=(0,_.$file)(e);t&&i.has(t)&&i.get(t).added.push(e)})),n.forEach((function(e){if(!e||!e.location)return;const t=(0,_.$file)(e);t&&i.has(t)&&i.get(t).removed.push(e)})),s.forEach((function(e){if(i.has(e)){const{added:t,removed:n,editors:s}=i.get(e);(t.length||n.length)&&s.forEach((e=>e.apply(t,n)))}}))}getEditor(e){for(const t of this.editors)if(t.textEditor===e)return t;const t=new Ts.default(e);return this.editors.add(t),t.onDidDestroy((()=>{this.editors.delete(t)})),t.subscriptions.add(e.onDidChangePath((()=>{t.dispose(),this.getEditor(e)}))),t.subscriptions.add(e.onDidChangeGrammar((()=>{t.dispose(),this.getEditor(e)}))),t.apply((0,_.filterMessages)(this.messages,e.getPath()),[]),t}dispose(){for(const e of this.editors)e.dispose();this.subscriptions.dispose()}},fn.default=gn;var Ms=Zs(fn=fn.default),As={};Object.defineProperty(As,"__esModule",{value:!0});var Os=void 0;As.default=Os;var $s=o,Rs=Ws(kn),Ds=Ws(i),zs={};Object.defineProperty(zs,"__esModule",{value:!0});var Is=Fs;zs.getChunks=Is;var Ls=qs;zs.getChunksByProjects=Ls;var js=Us;zs.mergeChange=js;var Ns=function(e,t){const n={},i=atom.project.getPaths();return t.forEach((function(t){const s=(0,_.$file)(t);if(s){("Files"===e?[s]:qs(s,i)).forEach((e=>Us(n,e,t.severity)))}})),n};zs.calculateDecorations=Ns;var Bs=function(e){return e&&e.__esModule?e:{default:e}}(t);function Fs(e,t){const n=[],i=e.split(Bs.default.sep);for(;i.length;){const e=i.join(Bs.default.sep);if(e&&(n.push(e),e===t))break;i.pop()}return n}function qs(e,t){const n=t.find((t=>e.startsWith(t)));return n?Fs(e,n):[e]}function Us(e,t,n){e[t]||(e[t]={info:!1,error:!1,warning:!1}),e[t][n]=!0}function Ws(e){return e&&e.__esModule?e:{default:e}}class Hs{constructor(){this.messages=[],this.decorations={},this.subscriptions=new $s.CompositeDisposable,this.decorateOnTreeView=void 0,this.subscriptions.add(atom.config.observe("linter-ui-default.decorateOnTreeView",(e=>{if(void 0===this.decorateOnTreeView)this.decorateOnTreeView=e;else if("None"===e)this.update([]),this.decorateOnTreeView=e;else{const t=this.messages;this.decorateOnTreeView=e,this.update(t)}}))),setTimeout((()=>{const e=Hs.getElement();e&&this.subscriptions.add((0,Ds.default)(e,"click",(0,Rs.default)((()=>{this.update()})),{passive:!0}))}),100)}update(e=null){Array.isArray(e)&&(this.messages=e);const t=this.messages,n=Hs.getElement(),i=this.decorateOnTreeView;n&&"None"!==i&&this.applyDecorations((0,zs.calculateDecorations)(i,t))}applyDecorations(e){const t=Hs.getElement();if(!t)return;const n={},i={};Object.keys(this.decorations).forEach((i=>{if({}.hasOwnProperty.call(this.decorations,i)&&!e[i]){const e=n[i]||(n[i]=Hs.getElementByPath(t,i));e&&this.removeDecoration(e)}})),Object.keys(e).forEach((s=>{if(!{}.hasOwnProperty.call(e,s))return;const r=n[s]||(n[s]=Hs.getElementByPath(t,s));r&&(this.handleDecoration(r,!!this.decorations[s],e[s]),i[s]=e[s])})),this.decorations=i}handleDecoration(e,t=!1,n){let i=null;t&&(i=e.querySelector("linter-decoration")),null!==i?i.className="":(i=document.createElement("linter-decoration"),e.appendChild(i)),n.error?i.classList.add("linter-error"):n.warning?i.classList.add("linter-warning"):n.info&&i.classList.add("linter-info")}removeDecoration(e){const t=e.querySelector("linter-decoration");t&&t.remove()}dispose(){this.subscriptions.dispose()}static getElement(){return document.querySelector(".tree-view")}static getElementByPath(e,t){return e.querySelector(`[data-path=${CSS.escape(t)}]`)}}Os=Hs,As.default=Os;var Vs=Zs(As=As.default);function Zs(e){return e&&e.__esModule?e:{default:e}}g=class{constructor(){this.name="Linter",this.panel=void 0,this.signal=new un.default,this.editors=void 0,this.treeview=void 0,this.commands=new Zt.default,this.messages=[],this.statusBar=new on.default,this.intentions=new pn.default,this.subscriptions=new m.CompositeDisposable,this.idleCallbacks=new Set,this.subscriptions.add(this.signal,this.commands,this.statusBar);const e=window.requestIdleCallback((()=>{this.idleCallbacks.delete(e),this.panel=new Ft.default,this.panel.update(this.messages)}));this.idleCallbacks.add(e);const t=window.requestIdleCallback((()=>{this.idleCallbacks.delete(t),this.subscriptions.add(atom.config.observe("linter-ui-default.showDecorations",(e=>{e&&!this.editors?(this.editors=new Ms.default,this.editors.update({added:this.messages,removed:[],messages:this.messages})):!e&&this.editors&&(this.editors.dispose(),this.editors=null)})))}));this.idleCallbacks.add(t)}render(e){const t=this.editors;this.messages=e.messages,t&&(t.isFirstRender()?t.update({added:e.messages,removed:[],messages:e.messages}):t.update(e)),this.treeview||(this.treeview=new Vs.default,this.subscriptions.add(this.treeview)),this.treeview.update(e.messages),this.panel&&this.panel.update(e.messages),this.commands.update(e.messages),this.intentions.update(e.messages),this.statusBar.update(e.messages)}didBeginLinting(e,t){this.signal.didBeginLinting(e,t)}didFinishLinting(e,t){this.signal.didFinishLinting(e,t)}dispose(){this.idleCallbacks.forEach((e=>window.cancelIdleCallback(e))),this.idleCallbacks.clear(),this.subscriptions.dispose(),this.panel&&this.panel.dispose(),this.editors&&this.editors.dispose()}},f.default=g;var Gs=function(e){return e&&e.__esModule?e:{default:e}}(f=f.default);const Ks=new Set,Ys=new Set;let Xs,Js;
//# sourceMappingURL=index.js.map
